(function(e){function t(t){for(var r,o,c=t[0],s=t[1],u=t[2],l=0,p=[];l<c.length;l++)o=c[l],a[o]&&p.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2548e938":"a65c6760","chunk-4ba7ce12":"a53cbcb4","chunk-76744441":"67636cc5","chunk-97ca0eb8":"c5638230","chunk-420f06b5":"44ee5715","chunk-12669310":"7e4c4d88","chunk-505390d6":"9b80d4ca","chunk-d60bb03c":"03dab374"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-2548e938":1,"chunk-4ba7ce12":1,"chunk-76744441":1,"chunk-97ca0eb8":1,"chunk-420f06b5":1,"chunk-12669310":1,"chunk-505390d6":1,"chunk-d60bb03c":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-2548e938":"581300f0","chunk-4ba7ce12":"2664a2e6","chunk-76744441":"7d047818","chunk-97ca0eb8":"e3f60934","chunk-420f06b5":"db26376a","chunk-12669310":"ab985196","chunk-505390d6":"5ca288f9","chunk-d60bb03c":"6214f9c9"}[e]+".css",o=s.p+r,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var c=a[i],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===o))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){c=l[i],u=c.getAttribute("data-href");if(u===r||u===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.request=r,n(a)},p.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(p)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=i);var u,l=document.getElementsByTagName("head")[0],p=document.createElement("script");p.charset="utf-8",p.timeout=120,s.nc&&p.setAttribute("nonce",s.nc),p.src=c(e),u=function(t){p.onerror=p.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");i.type=r,i.request=o,n[1](i)}a[e]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:p})},12e4);p.onerror=p.onload=u,l.appendChild(p)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2f74":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i={name:"App"},c=i,s=n("2877"),u=Object(s["a"])(c,o,a,!1,null,null,null);u.options.__file="App.vue";var l=u.exports,p=(n("6423"),n("2f74"),n("6573"),n("aa35"),n("a481"),n("28a5"),n("7f7f"),n("8c4f")),d=function(){return Promise.all([n.e("chunk-97ca0eb8"),n.e("chunk-420f06b5"),n.e("chunk-12669310")]).then(n.bind(null,"e878"))},h=function(){return Promise.all([n.e("chunk-97ca0eb8"),n.e("chunk-420f06b5"),n.e("chunk-505390d6")]).then(n.bind(null,"8927"))},f=function(){return n.e("chunk-2548e938").then(n.bind(null,"839f"))},m=function(){return Promise.all([n.e("chunk-97ca0eb8"),n.e("chunk-d60bb03c")]).then(n.bind(null,"dc52"))},g=function(){return n.e("chunk-76744441").then(n.bind(null,"a1ca"))},_=function(){return n.e("chunk-4ba7ce12").then(n.bind(null,"90ab"))};r["default"].use(p["a"]);var b=new p["a"]({mode:"history",routes:[{path:"/article/:id",name:"article",component:h},{path:"/comment/:id",name:"comment",component:d},{path:"/jssdk",name:"jssdk",component:g},{path:"/message/:sid?/:id?",name:"message",component:f},{path:"/group/:id",name:"group",component:_},{path:"/community/:id",name:"community",component:m}]});b.beforeEach(function(e,t,n){var r=e.meta,o=e.path,a=e.query,i=(e.name,e.params,o.split("/").slice(1)),c=a.type,s=a.category;switch(document.title=r.title?r.title:"贴近",i[0]){case"feed":"2"==c?"3"==s?b.replace({path:o.replace("feed","comment")}):b.replace({path:o.replace("feed","article")}):n();break;default:n();break}});var v=b,w=n("c0d6"),x=n("bc3a"),y=n.n(x),k=n("f121"),A=y.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).BASE_API,timeout:15e3,withCredentials:!0});A.interceptors.request.use(function(e){var t=k["a"].server+e.url;return e.url=t,ENV.app?ENV.app&&ENV.ios?e.headers["Closer-Agent"]="Closer-Ios":ENV.app&&ENV.android&&(e.headers["Closer-Agent"]="Closer-Android"):e.headers["Closer-Agent"]="Closer-H5",Cookies.get("uid")&&(e.headers["X-Udid"]=Cookies.get("uid")),Cookies.get("aid")&&(e.headers["X-Adid"]=Cookies.get("aid")),(Cookies.get("token")&&-1==e.url.indexOf("auth")&&-1==e.url.indexOf("account")||Cookies.get("token")&&-1!=e.url.indexOf("closer_account.bind_phone"))&&(e.headers.Authorization=Cookies.get("token")),console.log(e.url),e},function(e){return Promise.reject(e).catch(e)}),A.interceptors.response.use(function(e){return e},function(e){var t=n("07f7").default;if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录",router.push({name:"worldcupIndex"});break;case 403:e.message="拒绝访问",router.push({name:"worldcupIndex"});break;case 404:e.message="请求地址出错: ".concat(e.response.config.url);break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:}else e.message="网络错误，请稍后再试！";return e&&e.response&&e.response.data&&e.response.data.message?console.warn(e.response.data.message):console.warn(e.message),t.reject(e).catch(e)});var j=A,O=n("a78e"),S=n.n(O),T=n("3a34"),E=n.n(T),C=n("c6c6"),R=n.n(C),I=n("18a0"),N=n.n(I),U=n("283e"),G=n.n(U),L=(n("4917"),navigator.userAgent.toLowerCase()||navigator.userAgent.toLowerCase()),M=location.href,V={},P=k["a"].href;function B(){for(var e in P){var t=new(URL||webkitURL)(P[e]).hostname,n=M.indexOf(t);n>-1&&n<=8&&(V.env=e)}V.env||console.error("ENV.env不可为空，请确保当前测试页面的location.origin是~/src/config/index.js配置的href值之一!"),V.ua=L,V.app=/closer-(android|ios)/.test(L),V.wx=/micromessenger/.test(L),V.ios=/((iphone\sos)\s([\d_]+))|(-ios)/.test(L),V.android=/((android);?[\s\/]+([\d.]+)?)|(-android)/.test(L),V.version=L.match(/closerapp\/version\/([0-9.]+)/)||"0",V.weibo=/weibo/.test(L),V.qq=/qq/.test(L),V.safari=/version\/([\d.]+)([^S](safari)|[^M]*(mobile)[^S]*(safari))/.test(L),V.chrome=/chrome\/([\d.]+)/.test(L)||/crios\/([\d.]+)/.test(L),V.firefox=/firefox\/([\d.]+)/.test(L),V.ie=/msie\s([\d.]+)/.test(L)||/trident\/[\d](?=[^\?]+).*rv:([0-9.].)/.test(L),V.dev="build"!=V.env;var r=L.match(/closerapp\/version\/([0-9.]+)/);return V.version=r?r[1]:"",V.v120=D("1.2.0"),console.log("当前环境变量window.ENV:",V),J(),V}function J(){var e=function(e){var t=k["a"][e];Object.defineProperty(k["a"],e,{get:function(){return t[V.env]||""}})};for(var t in k["a"])e(t)}function D(e,t){var n=V.version,r=!t||V.android?e:t;if(n&&r){n=n.split("."),r=r.split(".");for(var o=Math.max(n.length,r.length),a=0;a<o;a++){var i=parseInt(n[a]||0),c=parseInt(r[a]||0);if(i>=c)return!0}}return!1}var q=B();if(q.dev)new E.a;function W(){var e=Math.min(screen.width,document.documentElement.getBoundingClientRect().width)/375*16;document.documentElement.style.fontSize=(e>=32?32:e)+"px"}function F(){w["a"].dispatch("get_adcookie",{webUdid:!0}).then(function(){})}r["default"].prototype.ENV=window.ENV=q,window.wx=N.a,window.Axios=j,window.Cookies=S.a,window.MobileDetect=R.a,window.setupWebViewJavascriptBridge=function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)},r["default"].use(G.a,{preload:1.3,error:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAGmAQMAAAAZMJMVAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAADUExURefn5ySG6Q8AAAA+SURBVHja7cExAQAAAMKg9U9tCj+gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAvwGcmgABBZ8R+wAAAABJRU5ErkJggg==",loading:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAGmAQMAAAAZMJMVAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAADUExURefn5ySG6Q8AAAA+SURBVHja7cExAQAAAMKg9U9tCj+gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAvwGcmgABBZ8R+wAAAABJRU5ErkJggg==",attempt:1}),W(),window.onresize=W,F(),new r["default"]({store:w["a"],router:v,render:function(e){return e(l)}}).$mount("#app")},6423:function(e,t,n){},6573:function(e,t,n){},c0d6:function(e,t,n){"use strict";n("b54a"),n("7f7f"),n("96cf");var r,o=n("3040"),a=(n("a481"),n("3b2b"),n("4917"),n("a322")),i=(n("cadf"),n("551c"),n("097d"),n("2b0e")),c=n("2f62"),s=n("76a0"),u=n("ed08"),l=n("6bde"),p={admin:{get_auth_path:"closer_auth.get_auth_path",login_with_wechat:"closer_auth.login_with_wechat",closeruser_regist:"closer_auth.closeruser_regist",get_code_by_phone:"closer_account.get_code_by_phone_v2",check:"closer_account.check",check_wechat:"closer_account.check_wechat",info:"closer_user.info",user_show:"closer_user.show",bind_phone:"closer_account.bind_phone",like:"closer_reply.like",add_reply:"closer_reply.add_reply",invite_counts:"closer_user.invite_counts",wechat_config:"closer_share.wechat_config"},command:{show:"closer_subject.show",incr_view:"closer_subject.incr_view",comments:"closer_reply.comments",videos:"ali_vod.accessInfo",report:"closer_report.add",like:"closer_reply.like",add_reply:"closer_reply.add_reply",replys:"closer_reply.replys",reportType:"closer_report.get_report_types",hot_subjects:"closer_subject.hot_subjects"},community:{show:"closer_community.show",community_subject_list_index:"closer_subject.community_subject_list_index",subscription:"closer_community.subscription"},group:{show:"closer_class.show",recruiting:"closer_class.recruiting",group_subject_list:"closer_subject.class_subject_list_index",share_group:"closer_share.outer_group"},activity:(r={get_activity:"closer_activity.get_activity",add_channel:"activity_worldcup.add_channel",check_guess_result:"activity_worldcup.check_guess_result",get_match_list:"activity_worldcup.get_match_list",get_user_guess_list:"activity_worldcup.get_user_guess_list",get_user_guess_statistic:"activity_worldcup.get_user_guess_statistic",guess_match:"activity_worldcup.guess_match",receive_chance:"activity_worldcup.receive_chance"},Object(a["a"])(r,"check_guess_result","activity_worldcup.check_guess_result"),Object(a["a"])(r,"activity_water_chance","activity_water.chance"),Object(a["a"])(r,"activity_water_update","activity_water.update"),Object(a["a"])(r,"activity_water_join","activity_water.join"),Object(a["a"])(r,"get_invite_statistic","closer_invite.get_statistic"),Object(a["a"])(r,"get_invitee_page_list","closer_invite.get_invitee_page_list"),Object(a["a"])(r,"get_yesterday_award_amt","closer_invite.get_yesterday_award_amt"),Object(a["a"])(r,"remind_login","closer_invite.remind_login"),r),statitics:{view_count:"closer_promotion_activity.view_count",get_adcookie:"closer_statistics.get_adcookie"},share:{wechat_config:"closer_share.wechat_config",get_adcookie:"closer_statistics.get_adcookie",common:"closer_statistics.user_action_v2"}},d={get_adcookie:function(e){return Axios.post(p.share.get_adcookie,e).then(function(e){return e.data})},common:function(e){return Axios.post(p.share.common,e).then(function(e){return e.data})},subscription:function(e){return Axios.post(p.community.subscription,e).then(function(e){return e.data})},incr_view:function(e){return Axios.post(p.command.incr_view,e).then(function(e){return e.data})},get_hot_subjects:function(e){return Axios.post(p.command.hot_subjects,e).then(function(e){return e.data})},getCode:function(e){return Axios.post(p.admin.get_code_by_phone,e)},Login:function(e){return Axios.post(p.admin.closeruser_regist,e)},getAuthPath:function(e){return Axios.post(p.admin.get_auth_path,e)},loginWithWechat:function(e){return Axios.post(p.admin.login_with_wechat,e)},getComments:function(e){return Axios.post(p.command.comments,e)},isLike:function(e){return Axios.post(p.command.like,e)},wechatConfig:function(e){return Axios.post(p.admin.wechat_config,e)}},h=(n("a78e"),n("f121")),f=!0,m={h5Cookies:"",incr_view:0,hotSubjects:[],visible:!1,smsCode:"",isLogin:!1,user:{},authSuccess:!1,messagelist:{data:[]}},g={get_focus_stat:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,o=n.payload,a=n.after,this,e.prev=3,e.next=6,d.subscription(o);case 6:if(i=e.sent,c=i.data,0!==c.code||!c.result){e.next=17;break}if(0!=o.flag){e.next=13;break}r("SET_FOCUS_STAT",!1,{root:!0}),e.next=15;break;case 13:return r("SET_FOCUS_STAT",!0,{root:!0}),e.abrupt("return",!0);case 15:e.next=18;break;case 17:Object(s["Toast"])({message:c.result,position:"top"});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](3),Object(s["Toast"])({message:e.t0,position:"top"});case 23:a&&a();case 24:case"end":return e.stop()}},e,this,[[3,20]])}));return function(t,n){return e.apply(this,arguments)}}(),get_incr_view:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,this,e.prev=2,e.next=5,d.incr_view(n);case 5:o=e.sent,console.log(o),0===o.code&&r("SET_INCR_VIEW",o.result),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[2,10]])}));return function(t,n){return e.apply(this,arguments)}}(),getHotSubjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,d.get_hot_subjects(n);case 4:o=e.sent,0===o.code&&(o.result.data.map(function(e){return e.content&&(e.content=JSON.parse(e.content)),e}),o.result.data&&r("SET_HOT_SUBJECTS",o.result.data)),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}(),getWxAuth:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,t.state,r=n.payload,o=n.before,console.log("getWxAuth",r),a={path:h["a"].wxAuthorization+encodeURIComponent(h["a"].href+Object(u["a"])(r.path+r.query))},o&&o(),e.next=7,d.getAuthPath(a).catch(function(e){Object(s["Toast"])("网络开小差啦~")});case 7:i=e.sent,console.log(i.data.result),Object(l["a"])(void 0!=i.data.code)&&0==i.data.code?location.href=i.data.result:i.result&&Object(s["Toast"])(i.result);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getUserInfoWithWx:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,t.state,console.log(n),o=Cookies.get("user"),a=Cookies.get("token"),!o||!a){e.next=10;break}return console.log("user-from-cookie:",JSON.parse(o)),r("SET_USER",JSON.parse(o)),e.abrupt("return",!0);case 10:return e.next=12,d.loginWithWechat(n).catch(function(e){Object(s["Toast"])("网络开小差啦~")});case 12:if(i=e.sent,c=i.data,console.log("data:",c),!Object(l["a"])(void 0!=c.code)||0!=c.code){e.next=27;break}return o=c.result.user,a=c.result.token,console.log("user-from-server:",o),r("SET_USER",o),console.log("token",a),console.log("user",o),Cookies.set("token",a,{expires:7}),Cookies.set("user",o,{expires:7}),e.abrupt("return",!0);case 27:return c.result&&Object(s["Toast"])(c.result),e.abrupt("return",!1);case 29:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getCode:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,s["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),e.next=4,d.getCode(n).catch(function(e){s["Indicator"].close(),Object(s["Toast"])("网络开小差啦~")});case 4:o=e.sent,a=o.data,s["Indicator"].close(),void 0!=Object(l["a"])(a.code)&&0==a.code?r({type:"getSmsCode",data:a}):a.result&&Object(s["Toast"])(a.result);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),login:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.rootState,t.state,r=t.commit,console.log("login, payload ",n),o=/^(0|86|17951)?(1[23456789][0-9])[0-9]{8}$/,!n.phone||o.test(n.phone)){e.next=6;break}return Object(s["Toast"])("请输入正确的手机号"),e.abrupt("return");case 6:if(0!=n.token.length){e.next=9;break}return Object(s["Toast"])("请输入验证码"),e.abrupt("return");case 9:return Cookies.get("uid")&&(n["udid"]=Cookies.get("uid")),Cookies.get("aid")&&(n["adid"]=Cookies.get("aid")),n["protocol"]="WEB_SOCKET",s["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),e.next=15,d.Login(n).catch(function(e){s["Indicator"].close(),Object(s["Toast"])("网络开小差啦~")});case 15:if(a=e.sent,i=a.data,s["Indicator"].close(),void 0==Object(l["a"])(i.code)||0!=i.code){e.next=28;break}if(!i.result||!i.result.token){e.next=25;break}if(Cookies.set("token",i.result.token,{expires:60}),!i.result.user){e.next=25;break}if(Cookies.set("user",JSON.stringify(i.result.user),{expires:60}),!n.push){e.next=25;break}return e.abrupt("return",i.result.user);case 25:r({type:"hide"}),e.next=31;break;case 28:return Object(s["Toast"])("网络开小差啦，请稍后再试"),s["Indicator"].close(),e.abrupt("return");case 31:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getCommentsList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,console.log("getCommentsList--",n),e.next=4,d.getComments(n).catch(function(e){Object(s["Toast"])("网络开小差啦~")});case 4:o=e.sent,a=o.data,void 0!=Object(l["a"])(a.code)&&0==a.code&&r({type:"setCommentList",data:a});case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),checkIsLike:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.next=3,d.isLike(n).catch(function(e){Object(s["Toast"])("网络开小差啦~")});case 3:r=e.sent,Object(l["a"])(void 0!=r.code)&&0==r.code||r.result&&Object(s["Toast"])(r.result);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},_={SET_H5COOKIES:function(e,t){e.h5Cookies=t},SET_INCR_VIEW:function(e,t){console.log("para:",t),e.incr_view=t},SET_HOT_SUBJECTS:function(e,t){console.log("SET_HOT_SUBJECTS",t),e.hotSubjects=t},SET_USER:function(e,t){e.user=t,e.isLogin=!0},setAuthStatus:function(e){e.authSuccess=!0},show:function(e){e.visible=!0},hide:function(e){e.visible=!1},getSmsCode:function(e,t){e.smsCode=t},setCommentList:function(e,t){e.messagelist=t.data.result.data}},b={namespaced:f,state:m,actions:g,mutations:_};function v(e){return w.apply(this,arguments)}function w(){return w=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Axios.get("".concat(p.command.show,"?subjectid=").concat(t)).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)})),w.apply(this,arguments)}var x={GET_APP_TOKEN:"",version_1_2:!1,res:{},content:{},exist:!0},y={fetch_content:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,a=n.id,e.prev=2,e.next=5,v(a);case 5:if(i=e.sent,0==i.code){e.next=10;break}r("GET_EXIST_STATUS",!1),e.next=17;break;case 10:if(window.ENV.app){e.next=14;break}if(!(0===i.result.int_verify||-1===i.result.int_verify&&4!=i.result.int_category&&6!=i.result.int_category||i.result.bool_delete)){e.next=14;break}return r("GET_EXIST_STATUS",!1),e.abrupt("return");case 14:i.result.content&&(c=JSON.parse(i.result.content),o.CONTENT_IMGS,o.IMG_INDEX=0,2===i.result.int_type&&(s=Object(u["i"])(c.html),s&&(c.html=s)),r("SET_CONTENT",c)),r("SET_RES",i.result),o.res=i.result;case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e["catch"](2),console.log("content.catch"),r("GET_EXIST_STATUS",!1),e.abrupt("return");case 24:case"end":return e.stop()}},e,this,[[2,19]])}));return function(t,n){return e.apply(this,arguments)}}()},k={GET_USER_AGENT:function(e,t){var n=t.nvg.toLowerCase(),r=t.ref,o=n.indexOf("closer-ios")>-1||n.indexOf("closer-android")>-1,a=o||r.indexOf("/invite")>-1;e.GET_MESSAGE_STATE=!a,e.GET_IS_APP=o,e.agent=n,e.isPre=r.indexOf("?view=pre")>-1},SET_CONTENT:function(e,t){e.content=t},SET_RES:function(e,t){e.res=t},GET_EXIST_STATUS:function(e,t){e.exist=t}},A={namespaced:!0,state:x,actions:y,mutations:k};n("ac6a");function j(e){return O.apply(this,arguments)}function O(){return O=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.command.show,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),O.apply(this,arguments)}var S={namespaced:!0,state:{discuss:{},content:{},subject:{},subjectExist:!0},mutations:{setContent:function(e,t){e.content=t},setDiscuss:function(e,t){e.discuss=t},setSubject:function(e,t){e.subject=t},setSubjectState:function(e,t){e.subjectExist=t}},actions:{getSubject:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c,s,l,p,d,h,f,m,g,_;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,e.prev=1,e.next=4,j(n);case 4:if(a=e.sent,i=a.data,console.log("getSubject:",i),"undefined"==typeof i.code||0!=i.code){e.next=15;break}if(window.ENV.app){e.next=12;break}if(!(0===i.result.int_verify||-1===i.result.int_verify&&4!=i.result.int_category&&6!=i.result.int_category||i.result.bool_delete)){e.next=12;break}return r("setSubjectState",!1),e.abrupt("return");case 12:i.result.content&&(c=JSON.parse(i.result.content),2===i.result.int_type&&(s=Object(u["i"])(c.html),s&&(c.html=s),l=[],p=0,c.discuss&&(d=c.discuss.map(function(e){if(e.text){var t=/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g,n=e.text.match(t);n?(e.weblink=!0,n.map(function(n){var r='<a href="'.concat(n,'" target="_blank">').concat(n,"</a>"),o=e.text.replace(t,r);e.newText=o})):e.weblink=!1}return e.image&&(e.image["index"]=p,l.push(e.image.link),p++),e}),r("setDiscuss",d)),3===i.result.int_category&&c.end_html&&(h=Object(u["i"])(c.end_html),f=/<img.*?(?:>|\/>)/gi,m=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,g=/data-index=[\'\"]?([^\'\"]*)[\'\"]?/i,_=h.match(f),_.forEach(function(e,t){h=h.replace(e,e.replace(g,"data-index='".concat(p,"'")));var n=e.match(m),r=n[t].replace("src=","");l.push(r.substring(1,n[t].replace("src=","").length-1)),p++}),h&&(c.end_html=h)),o.CONTENT_IMGS=l,o.IMG_INDEX=p,r("setContent",c),delete i.result.content,o.res=i.result,r("setSubject",i.result))),e.next=16;break;case 15:r("setSubjectState",!1);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),console.error("getSubject ",e.t0),r("setSubjectState",!1);case 22:case"end":return e.stop()}},e,this,[[1,18]])}));return function(t,n){return e.apply(this,arguments)}}()}};function T(e){return E.apply(this,arguments)}function E(){return E=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.community.show,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),E.apply(this,arguments)}function C(e){return R.apply(this,arguments)}function R(){return R=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.community.community_subject_list_index,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),R.apply(this,arguments)}function I(e){return N.apply(this,arguments)}function N(){return N=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.community.subscription,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),N.apply(this,arguments)}function U(e){return G.apply(this,arguments)}function G(){return G=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.group.recruiting,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),G.apply(this,arguments)}var L={namespaced:!0,state:{communityShow:{},groupList:{},descResult:{},isFollow:!1,visible:!1},mutations:{setCommunityShow:function(e,t){console.log("payload",t);var n=t.data;e.communityShow=n.result,console.log("communityShow",e.communityShow)},getGroupList:function(e,t){console.log("payload",t);var n=t.data;e.groupList=n.result,console.log("groupList",e.groupList)},getDescResult:function(e,t){console.log("payload",t),e.descResult=t,console.log("descResult",e.descResult)},isFollow:function(e,t){console.log("payload",t),e.isFollow=t},show:function(e){e.visible=!0},hide:function(e){e.visible=!1}},actions:{getCommunityShow:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,a={communityid:n},e.next=4,T(a).catch(function(e){Object(s["Toast"])("网络开小差啦~")});case 4:i=e.sent,c=i.data,console.log("data--",c),Object(l["a"])(void 0!=c.code&&0==c.code)?(r({type:"setCommunityShow",data:c}),o.res=c.result):c.result&&Object(s["Toast"])(c.result);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getSubscription:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,t.rootState,e.next=3,I(n).catch(function(e){Object(s["Toast"])("网络开小差啦~")});case 3:o=e.sent,a=o.data,console.log("data",a),Object(l["a"])(void 0!=a.code)&&0==a.code?a&&(r("isFollow",!0),r("show"),r("SET_FOCUS_STAT","true",{root:!0})):(a.result,Object(s["Toast"])(a.result));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getGroupList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,e.next=3,U(n).catch(function(e){Object(s["Toast"])("网络开小差啦~")});case 3:o=e.sent,a=o.data,Object(l["a"])(void 0!=a.code)&&0==a.code?r({type:"getGroupList",data:a}):a.result&&Object(s["Toast"])(a.result);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}};function M(e){return V.apply(this,arguments)}function V(){return V=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.command.add_reply,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),V.apply(this,arguments)}function P(e){return B.apply(this,arguments)}function B(){return B=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.statitics.get_adcookie,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),B.apply(this,arguments)}var J,D={namespaced:!0,state:{visible:!1,replyData:{}},mutations:{show:function(e){e.visible=!0},hide:function(e){e.visible=!1},updateData:function(e,t){console.log(1,t),e.replyData=t}},actions:{addReplyData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,o=t.state,r({type:"hide"}),s["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),e.next=5,M(n).catch(function(e){s["Indicator"].close(),Object(s["Toast"])("网络开小差啦~")});case 5:a=e.sent,i=a.data,s["Indicator"].close(),void 0!=Object(l["a"])(i.code)&&0==i.code?(r({type:"updateData",data:i}),r({type:"show"}),console.log("state.show:",o.visible)):i.result&&Object(s["Toast"])(i.result);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getAdCookie:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.rootState,e.next=3,P(n).catch(function(e){Object(s["Toast"])("网络开小差啦~")});case 3:if(r=e.sent,o=r.data,void 0==Object(l["a"])(o.code)||0!=o.code){e.next=11;break}return console.log(1,o),o.result&&(a=o.result,a.udid&&Cookies.set("uid",a.udid,{expires:30})),e.abrupt("return",null);case 11:o.result&&Object(s["Toast"])(o.result);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}},q={admin:{get_auth_path:"closer_auth.get_auth_path",login_with_wechat:"closer_auth.login_with_wechat",closeruser_regist:"closer_auth.closeruser_regist",get_code_by_phone:"closer_account.get_code_by_phone_v2",check:"closer_account.check",check_wechat:"closer_account.check_wechat",info:"closer_user.info",user_show:"closer_user.show",bind_phone:"closer_account.bind_phone",like:"closer_reply.like",add_reply:"closer_reply.add_reply",invite_counts:"closer_user.invite_counts",wechat_config:"closer_share.wechat_config"},command:{show:"closer_subject.show",incr_view:"closer_subject.incr_view",comments:"closer_reply.comments",videos:"ali_vod.accessInfo",report:"closer_report.add",like:"closer_reply.like",add_reply:"closer_reply.add_reply",replys:"closer_reply.replys",reportType:"closer_report.get_report_types",hot_subjects:"closer_subject.hot_subjects"},community:{show:"closer_community.show",community_subject_list_index:"closer_subject.community_subject_list_index",subscription:"closer_community.subscription"},group:{show:"closer_class.show",recruiting:"closer_class.recruiting",group_subject_list:"closer_subject.class_subject_list_index",share_group:"closer_share.outer_group"},activity:(J={get_activity:"closer_activity.get_activity",add_channel:"activity_worldcup.add_channel",check_guess_result:"activity_worldcup.check_guess_result",get_match_list:"activity_worldcup.get_match_list",get_user_guess_list:"activity_worldcup.get_user_guess_list",get_user_guess_statistic:"activity_worldcup.get_user_guess_statistic",guess_match:"activity_worldcup.guess_match",receive_chance:"activity_worldcup.receive_chance"},Object(a["a"])(J,"check_guess_result","activity_worldcup.check_guess_result"),Object(a["a"])(J,"activity_water_chance","activity_water.chance"),Object(a["a"])(J,"activity_water_update","activity_water.update"),Object(a["a"])(J,"activity_water_join","activity_water.join"),Object(a["a"])(J,"get_invite_statistic","closer_invite.get_statistic"),Object(a["a"])(J,"get_invitee_page_list","closer_invite.get_invitee_page_list"),Object(a["a"])(J,"get_yesterday_award_amt","closer_invite.get_yesterday_award_amt"),Object(a["a"])(J,"remind_login","closer_invite.remind_login"),J),statitics:{view_count:"closer_promotion_activity.view_count",get_adcookie:"closer_statistics.get_adcookie"}};function W(e){return F.apply(this,arguments)}function F(){return F=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(q.group.share_group,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),F.apply(this,arguments)}function H(e){return X.apply(this,arguments)}function X(){return X=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(q.group.group_subject_list,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),X.apply(this,arguments)}var K,z={namespaced:!0,state:{group:{},groupFeedList:[],groupFeedTitle:""},mutations:{SET_GROUP_INFO:function(e,t){console.log("set group",t),e.group=t},SET_GROUP_LIST:function(e,t){console.log("set group list",t),e.groupFeedList=t},SET_GROUP_FEED_TITLE:function(e,t){console.log("set group title",t),e.groupFeedTitle=t}},actions:{getGroupInfo:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,t.rootState,e.prev=1,e.next=4,W(n);case 4:o=e.sent,a=o.data,console.log("code",a),0===a.code&&a.result&&r("SET_GROUP_INFO",a.result),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.error("getGroupInfo",e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t,n){return e.apply(this,arguments)}}(),getGroupList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,o=t.state,t.rootState,a=t.dispatch,e.prev=1,e.next=4,H(n);case 4:if(i=e.sent,c=i.data,0!==c.code){e.next=11;break}return e.next=9,c.result.data.map(function(e){return e.content=JSON.parse(e.content),e});case 9:s=e.sent,s.length>0?(r("SET_GROUP_LIST",s),r("SET_GROUP_FEED_TITLE","群作品")):a("getCommunityList",{communityid:o.group.group_info.communityid});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),console.error("getGroupList",e.t0);case 16:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t,n){return e.apply(this,arguments)}}(),getCommunityList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,t.rootState,console.log(n),e.prev=2,e.next=5,C(n);case 5:if(o=e.sent,a=o.data,console.log("getCommunityList",a),0!==a.code){e.next=14;break}return e.next=11,a.result.data.map(function(e){return e.content&&(e.content=JSON.parse(e.content)),e});case 11:i=e.sent,r("SET_GROUP_LIST",i),r("SET_GROUP_FEED_TITLE","热门文章");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](2),console.error("getGroupList",e.t0);case 19:case"end":return e.stop()}},e,this,[[2,16]])}));return function(t,n){return e.apply(this,arguments)}}()}};i["default"].use(c["a"]);t["a"]=new c["a"].Store({state:(K={UA:"",IS_APP:!1,IS_NEW_USER:!1,IS_DEV:!1,IMG_INDEX:0,CONTENT_IMGS:[],content:"",exist:!1,extension_text:"",alert_stat:!1,is_follow:!1,get_login_type:!1,visibleLogin:"",h5Cookies:"",isLogin:!1,user:{},h5Adid:""},Object(a["a"])(K,"extension_text",""),Object(a["a"])(K,"get_login_type",""),Object(a["a"])(K,"visibleLogin",!1),Object(a["a"])(K,"authSuccess",!1),Object(a["a"])(K,"res",{}),Object(a["a"])(K,"shareLink",""),Object(a["a"])(K,"preShow",!1),Object(a["a"])(K,"preImgs",[]),Object(a["a"])(K,"preIndex",0),Object(a["a"])(K,"wxConfig",{}),Object(a["a"])(K,"shareConfig",{title:"贴近一点，看身边",desc:"能赚稿费的本地内容社区",link:"",imgUrl:""}),K),mutations:{SET_CONTENT:function(e,t){e.content=t},GET_EXIST_STATUS:function(e,t){e.exist=t},SET_RES:function(e,t){e.res=t},SET_EXTENSION_TEXT:function(e,t){e.extension_text=t},SHOW_ALERT:function(e,t){e.alert_stat=t},SET_FOCUS_STAT:function(e,t){e.is_follow=t},GET_LOGIN_TYPE:function(e,t){e.get_login_type=t},SET_VISIBLE_LOGIN:function(e,t){e.visibleLogin=t},GET_VERSION:function(e){var t,n,r,o=navigator.userAgent.toLowerCase();if(o.indexOf("android")>-1||o.indexOf("adr")>-1||o.indexOf("linux")>-1){if(t="android",r="Android",o.match(new RegExp("android\\s(\\d+(?:\\.\\d*)+)"))){var a=o.match(new RegExp("android\\s(\\d+(?:\\.\\d*)+)"));n=a[1].replace(/\./g,"_")}}else if(o.indexOf("iphone")>-1||o.indexOf("ipad")>-1||o.indexOf("safari")>-1){if(t="ios",r="IOS",o.match(new RegExp("version/(\\d+(?:\\.\\d*)+)"))){var i=o.match(new RegExp("version/(\\d+(?:\\.\\d*)+)"));n=i[1].replace(/\./g,"_")}}else t="windows",r="Windows";e.nvgversion=n,e.nvgtype=t,e.nvgTypeToPowerCase=r},SET_H5COOKIES:function(e,t){console.log("h5",t),e.h5Cookies=t},SET_ENTER_TIME:function(e,t){e.enter_time=t},SET_USER:function(e,t){e.user=t,e.isLogin=!0},setAuthStatus:function(e){e.authSuccess=!0},SET_WX_CONFIG:function(e,t){e.wxConfig=t}},modules:{common:b,article:A,comment:S,community:L,message:D,group:z},actions:{get_adcookie:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=n.webUdid,this,e.prev=3,a={webUdid:o},e.next=7,d.get_adcookie(a);case 7:if(i=e.sent,0!==i.code){e.next=11;break}return r("SET_H5COOKIES",i.result.udid),e.abrupt("return",i.result.udid);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),console.log("e==",e.t0);case 16:case"end":return e.stop()}},e,this,[[3,13]])}));return function(t,n){return e.apply(this,arguments)}}(),down_adcookies:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.state,n=t.rootState,t.commit,this,r={webUdid:!1,deviceType:n.nvgtype||"ios",deviceVersion:n.nvgversion||"11_0_0",adid:Cookies.get("h5Adid")||"closer-t1"},e.next=4,d.get_adcookie(r);case 4:return e.sent,e.abrupt("return",!0);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),down_statistics:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c,s,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,t.commit,o=n.p1,a=Cookies.get("user")?JSON.parse(Cookies.get("user")).objectID:r.auth?r.auth.objectID:null,i=r.h5Cookies?r.h5Cookies:null,this,c={userId:a,deviceId:null,cookie:i,platform:"H5",attachPlatform:r.nvgTypeToPowerCase||null,communityId:r.res.communityid||null,title:r.res.title||null,dreason:null,time:Date.now(),cost:Date.now()-r.enter_time||0,totalTime:r.duration_time||0},e.next=7,Object(u["j"])(o,c);case 7:return s=e.sent,e.next=10,d.common(s);case 10:if(l=e.sent,0!==l.code){e.next=13;break}return e.abrupt("return",!0);case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),wx_config:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c,l,p,h,f,m,g,_,b,v,w;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,o=t.commit,!ENV.wx){e.next=21;break}return console.log("wx_config"),a={url:location.href},e.next=6,d.wechatConfig(a).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 6:if(i=e.sent,c=i.data,"undefined"==typeof c.code||0!=c.code){e.next=19;break}if(o("SET_WX_CONFIG",c.result),l=c.result,"{}"!=JSON.stringify(r.res)||"{}"!=JSON.stringify(r.group.group)){e.next=15;break}return console.info("not index"),Cookies.get("shareConfig")&&Object(u["l"])(l,JSON.parse(Cookies.get("shareConfig"))),e.abrupt("return");case 15:if(location.href.indexOf("/community")>-1)p=r.res.name?r.res.name:"栏目主页",f=r.res.description?r.res.description:"贴近一点 看身边",h=r.res.slogo?r.res.slogo:r.res.blogo;else if(location.href.indexOf("/group")>-1){if(console.log("state.res",JSON.stringify(r.group.group)),r.group.group&&r.group.group.group_info.group){if(m=r.group.group.group_info.group,p=m.name?m.name:"贴近群组",m.description)try{g=JSON.parse(r.group.group.group_info.group.description),f=g[0].content?g[0].content:"贴近一点 看身边"}catch(e){f=r.group.group.group_info.group.description}else f="贴近一点 看身边";h=Object(u["h"])(m.avatar)}}else _=r.content,0===r.res.int_type?(p=_.text?_.text:"分享图片",_.images&&_.images.length>0?(b=_.images.map(function(e){return e="[图片]",e}),f=b.join(" "),h=Object(u["h"])(_.images[0].link)):(f="[图片]",h="")):1===r.res.int_type?(p=_.text?_.text:"分享视频",_.videos&&_.videos.length>0?(v=_.videos.map(function(e){return e="[视频]",e}),f=v.join(" "),h=Object(u["h"])(_.videos[0].imageUrl)):(f="[视频]",h="")):(p=r.res.title?r.res.title:_.text?_.text:_.summary,f=_.summary?_.summary:"分享文章",h=Object(u["h"])(r.res.cover)?Object(u["h"])(r.res.cover):Object(u["h"])(r.res.bigcover));w={title:p,desc:f,imgUrl:h},Cookies.set("shareConfig",w),Object(u["l"])(l,w);case 19:e.next=22;break;case 21:return e.abrupt("return");case 22:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}})},ed08:function(e,t,n){"use strict";n.d(t,"f",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"i",function(){return u}),n.d(t,"h",function(){return l}),n.d(t,"g",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"k",function(){return h}),n.d(t,"j",function(){return f}),n.d(t,"e",function(){return _}),n.d(t,"a",function(){return v}),n.d(t,"l",function(){return x}),n.d(t,"d",function(){return y});n("96cf"),n("3b2b"),n("b54a"),n("f751");var r=n("3040"),o=(n("ac6a"),n("4917"),n("a481"),n("28a5"),n("cadf"),n("551c"),n("097d"),n("f121")),a=n("c0d6");function i(){location.href=o["a"].download}function c(e){e=e||window.location.href;var t=e.substring(e.lastIndexOf("?")+1),n={},r=/([^?&=]+)=([^?&=]*)/g;return t.replace(r,function(e,t,r){var o=decodeURIComponent(t),a=decodeURIComponent(r);return a=String(a),n[o]=a,e}),n}function s(e,t){var n=new Date(e),r=n.getFullYear(),o=n.getMonth()+1,a=n.getDate(),i=n.getHours(),c=n.getMinutes(),s=n.getSeconds();return o<10&&(o="0"+o),a<10&&(a="0"+a),i<10&&(i="0"+i),c<10&&(c="0"+c),s<10&&(s="0"+s),"date"==t?r+"-"+o+"-"+a:"time"==t?r+"-"+o+"-"+a+" "+i+":"+c:void 0}function u(e){var t=/<img.*?(?:>|\/>)/gi,n=e.match(t);if(n){var r=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,o=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,i=/height=[\'\"]?([^\'\"]*)[\'\"]?/i;a["a"].state.CONTENT_IMGS=[],a["a"].state.IMG_INDEX=0,n.forEach(function(t,n){var c,s,u,l=t.match(r),p=t.match(o),d=t.match(i);l?(p&&d?(p[1]<200?(c=p[1]+"px",u=d[1]+"px"):(c="100%",u=100*d[1]/p[1]+"%"),u,s=t.replace(/src=/g,'style="width: '.concat(c,"; height: ").concat(u,'; background: #e7e7e7; max-width: 100%;" data-feedlazy="feedlazy" data-index="').concat(n+1,'" data-src='))):(c="100%",u="auto","28.27vw",s=t.replace(/src=/g,'style="width: '.concat(c,'; background: #e7e7e7; max-width: 100%;" data-feedlazy="feedlazy2" data-index="').concat(n+1,'" data-src='))),a["a"].state.CONTENT_IMGS.push(l[0].replace("src=","").substring(1,l[0].replace("src=","").length-1)),a["a"].state.IMG_INDEX++):s="",e=e.replace(t,'<div class="img-box">'.concat(s,"</div>"))}),console.log(":xxxx",a["a"].state.CONTENT_IMGS)}var c=/<video.*?(?:>|\/>|<\/video>)/gi,s=e.match(c);if(s){var u,l=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,p=/vid=[\'\"]?([^\'\"]*)[\'\"]?/i,d=/imageUrl=[\'\"]?([^\'\"]*)[\'\"]?/i,h=/poster=[\'\"]?([^\'\"]*)[\'\"]?/i,f=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,m=/height=[\'\"]?([^\'\"]*)[\'\"]?/i;s.forEach(function(t,n){var r,o,a,i,c=t.match(l),s=t.match(p),g=t.match(d),_=t.match(h),b=t.match(f),v=t.match(m),w="";r=s?s[1]:"",o=c?c[1]:"",i=parseInt(v[1])/parseInt(b[1]),a=g?g[1]:_?_[1]:"",i>1&&(w="video-box-vertical"),u=window.ENV.app?"<section \n          class='video-box video-box-native'\n          data-vid='".concat(r,"'\n          data-uid='").concat(o,"'\n          data-bg='").concat(a,"'>\n          <section \n            class='video-wrap'\n            data-vid='").concat(r,"'\n            data-uid='").concat(o,"'\n            >\n            <img data-src='").concat(a,"'\n              class='video-play-poster'/>\n            <span\n              class='video-play-icon' data-vid='").concat(r,"' data-uid='").concat(o,"'></span>\n          </section>\n        </section>"):"<section \n          class='video-box video-box-h5 ".concat(w,"'\n          data-vid='").concat(r,"'\n          data-uid='").concat(o,"'\n          >\n          <section \n            class='video-wrap'\n            data-vid='").concat(r,"'\n            data-uid='").concat(o,"'\n            >\n              <video src='").concat(c[1],"'\n              class='video-tag'\n              preload='none'\n              controls\n              controlsList='nodownload'\n              poster='").concat(a,"'\n              data-bg='").concat(a,'\'\n              playsinline="true"\n              webkit-playsinline="true"\n              x5-playsinline="true"\n              >\n              </video>\n          </section>\n        </section>'),e=e.replace(t,u)})}var g=/<iframe.*?(?:>|\/>|<\/iframe>)/gi,_=e.match(g);if(_){var b=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,v=/height=[\'\"]?([^\'\"]*)[\'\"]?/i;_.forEach(function(t,n){var r=t.match(b),o=t.match(v),a=t.split(r[0]),i="".concat(a[0],'width="100%"').concat(a[1]),c=i.split(o[0]),s="".concat(c[0],' height="240" ').concat(c[1]),u='<section class="imgbox tiejin-iframe">\n                  '.concat(s,"</iframe>\n                </section>");e=e.replace(t,u)})}return e}function l(e,t,n){var r=o["a"].file;if(e){var a=n||500;return"src"===t?-1!==e.indexOf("://")?e+"?s="+a:r+e+"?s="+a:-1!==e.indexOf("://")?e:r+e}}function p(e,t){var n=new Date(e),r=new Date,o=n.getTime(n),a=r.getTime(r),i=a-o,c=i/1e3/60/60/24/30,s=Math.floor(c),u=i/1e3/60/60/24,l=Math.floor(u),p=i/1e3/60/60-24*l,d=Math.floor(p),h=i/1e3/60-1440*l-60*d,f=Math.floor(h),m=i/1e3-86400*l-3600*d-60*f,g=Math.floor(m);return s>1?s+"个月前":l>0?l+"天前":d>0?d+"小时前":f>10?f+"分钟前":g>0?"刚刚":void 0}function d(e,t){var n=t||null,r=e||null,o=!(!window.ENV.app||!window.ENV.ios);window.ENV.v120?o?window.WebViewJavascriptBridge&&setupWebViewJavascriptBridge(function(e){e.callHandler("playVideo",{url:r,vid:n})}):"undefined"!=typeof window.bridge&&window.bridge.playVideo(n,r):location.href="/?vid=".concat(n)}function h(e){console.log(a["a"].state.CONTENT_IMGS);var t=a["a"].state.CONTENT_IMGS,n=parseInt(e),r={imgs:t,index:n},o=!(!window.ENV.app||!window.ENV.ios);o?window.WebViewJavascriptBridge&&setupWebViewJavascriptBridge(function(e){e.callHandler("tapImage",r)}):"undefined"!=typeof window.bridge&&window.bridge.tapImage(JSON.stringify(r))}function f(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function m(e){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}if(w()){e.next=14;break}if(!(t.indexOf("?from=group")>-1)){e.next=9;break}return e.next=5,this.getParam("groupid",t);case 5:e.sent,location.href="closer://jump/to/group",e.next=10;break;case 9:t.indexOf("pkgname=com.ums.closer")>-1?location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer":location.href=t;case 10:return setTimeout(function(){location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer"},1500),e.abrupt("return");case 14:t.indexOf("?from=group")>-1?location.href=t:t.indexOf("pkgname=com.ums.closer")>-1?location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer":location.href="".concat(location.protocol,"//").concat(location.host,"?downurl=").concat(t);case 15:e.next=18;break;case 17:location.href="".concat(location.protocol,"//").concat(location.host);case 18:case"end":return e.stop()}},e,this)})),g.apply(this,arguments)}function _(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,c,s,u,l,p,d,h,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.store,r=t.route,o=t.str,a=t.defaultStr,i=t.redirectUrl,e.next=3,n.dispatch("down_adcookies");case 3:if(c=e.sent,!c){e.next=23;break}return l=r.params.id||r.params.messageid,d=JSON.parse,r.path.indexOf("/community")>-1?(s="community",u="closer://community/".concat(l)):r.path.indexOf("/feed")>-1||r.path.indexOf("/article")>-1||r.path.indexOf("/comment")>-1?(s="article",u="closer://feed/".concat(l),s=1===n.state.res.int_type?"video":"article"):r.path.indexOf("/group")>-1?(s="group",u="closer://group/".concat(l)):(s="inviter",u="closer://jump/to/mine",l=d(Cookies.get("inviter")).id),p="string"===typeof o&&o?o:a,h={action:"click",objectType:s||"article",objectId:l||null,position:p,progress:1,recommendId:null},e.next=11,n.dispatch("down_statistics",{p1:h});case 11:if(f=e.sent,!f){e.next=23;break}if(!i){e.next=22;break}if("wx"!==i){e.next=18;break}return e.abrupt("return",!0);case 18:return m(i),e.abrupt("return");case 20:e.next=23;break;case 22:m(u);case 23:case"end":return e.stop()}},e,this)})),b.apply(this,arguments)}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.split("?");var n=e[0],r=[];for(var o in e[1]&&(t=Object.assign(c(e),t)),t)t.hasOwnProperty(o)&&r.push("".concat(o,"=").concat(t[o]));return n+"?"+r.join("&")}function w(){if("undefined"!=typeof window){var e=navigator.userAgent.toLowerCase(),t=!1,n=!1,r=!1;return t=/micromessenger/i.test(e),n=/qq/i.test(e),/mqqbrowser/i.test(e)&&(n=!1),r=/weibo/i.test(e),t||n||r}}function x(e,t,n){console.info("wxshare content:",t),e.signature&&e.appId&&e.nonceStr&&e.timestamp&&(wx.config({debug:!1,signature:e.signature,appId:e.appId,nonceStr:e.nonceStr,timestamp:e.timestamp,jsApiList:n||["onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","onMenuShareTimeline"]}),wx.ready(function(){wx.onMenuShareAppMessage({title:t.title,desc:t.desc,imgUrl:t.imgUrl,link:t.link||location.href,type:"",dataUrl:"",success:function(){Toast("分享成功~")}}),wx.onMenuShareTimeline({title:t.title,imgUrl:t.imgUrl,link:t.link||location.href,success:function(){Toast("分享成功~")}})}),wx.error(function(e){console.error("wx.config.error",e)}))}function y(e){var t=Date.now(),n=+new Date(e),r=t-n,o="";return o=r>=6048e5?new Date(e).Format("MM-dd"):r>=864e5?parseInt(r/864e5)+"天前":r>=36e5?parseInt(r/36e5)+"小时前":r>=6e4?parseInt(r/6e4)+"分钟前":"刚刚",o}Date.prototype.Format=function(e){if(e=e||"yyyy-MM-dd hh:mm:ss","Invalid Date"==this)return"";var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}},f121:function(e,t,n){"use strict";t["a"]={href:{build:"https://a.tiejin.cn",dev:"https://a-qa.tiejin.cn",sandbox:"https://t1-sandbox.tiejin.cn",local:"http://t1-sandbox.tiejin.cn:9999"},file:{build:"https://file.tiejin.cn",dev:"https://file-qa.tiejin.cn",sandbox:"https://file-sandbox.tiejin.cn",local:"https://file-sandbox.tiejin.cn"},server:{build:"https://api.tiejin.cn/command/",dev:"https://api-qa.tiejin.cn/command/",sandbox:"https://api-sandbox.tiejin.cn/command/",local:"https://api-sandbox.tiejin.cn/command/"},download:{build:"https://download.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588",dev:"https://download-qa.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588",sandbox:"https://download-sandbox.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588",local:"https://download-sandbox.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588"},wxAuthorization:{build:"https://h5.tiejin.cn/redirect?redirectUrl=",dev:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl=",sandbox:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl=",local:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl="}}}});
//# sourceMappingURL=app.702f18f9.js.map