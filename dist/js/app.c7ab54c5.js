(function(e){function t(t){for(var r,o,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)o=c[l],a[o]&&d.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-1350f176":"a563c8ea","chunk-3eb33e21":"ad7bd7c4","chunk-76744441":"67636cc5","chunk-a168f9d2":"220e2292","chunk-292df08c":"70a4800e","chunk-70b03833":"cd2a7770","chunk-ffc53770":"6e70bbec","chunk-58f4c7b8":"3e3cf4ad"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-1350f176":1,"chunk-3eb33e21":1,"chunk-76744441":1,"chunk-a168f9d2":1,"chunk-292df08c":1,"chunk-70b03833":1,"chunk-ffc53770":1,"chunk-58f4c7b8":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-1350f176":"5b093d59","chunk-3eb33e21":"2ce9a11d","chunk-76744441":"7d047818","chunk-a168f9d2":"85302950","chunk-292df08c":"f7bb6053","chunk-70b03833":"8551e251","chunk-ffc53770":"031a374e","chunk-58f4c7b8":"69dd0b72"}[e]+".css",o=s.p+r,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var c=a[i],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===o))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){c=l[i],u=c.getAttribute("data-href");if(u===r||u===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.request=r,n(a)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=i);var u,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=c(e),u=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");i.type=r,i.request=o,n[1](i)}a[e]=void 0}};var p=setTimeout(function(){u({type:"timeout",target:d})},12e4);d.onerror=d.onload=u,l.appendChild(d)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2f74":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i={name:"App"},c=i,s=n("2877"),u=Object(s["a"])(c,o,a,!1,null,null,null);u.options.__file="App.vue";var l=u.exports,d=(n("6423"),n("2f74"),n("6573"),n("aa35"),n("a481"),n("28a5"),n("7f7f"),n("8c4f")),p=function(){return Promise.all([n.e("chunk-a168f9d2"),n.e("chunk-292df08c"),n.e("chunk-ffc53770")]).then(n.bind(null,"e878"))},f=function(){return Promise.all([n.e("chunk-a168f9d2"),n.e("chunk-292df08c"),n.e("chunk-70b03833")]).then(n.bind(null,"8927"))},h=function(){return n.e("chunk-3eb33e21").then(n.bind(null,"839f"))},m=function(){return Promise.all([n.e("chunk-a168f9d2"),n.e("chunk-58f4c7b8")]).then(n.bind(null,"dc52"))},g=function(){return n.e("chunk-76744441").then(n.bind(null,"a1ca"))},_=function(){return n.e("chunk-1350f176").then(n.bind(null,"90ab"))};r["default"].use(d["a"]);var b=new d["a"]({mode:"history",routes:[{path:"/article/:id",name:"article",component:f},{path:"/comment/:id",name:"comment",component:p},{path:"/jssdk",name:"jssdk",component:g},{path:"/message/:sid?/:id?",name:"message",component:h},{path:"/group/:id",name:"group",component:_},{path:"/community/:id",name:"community",component:m}]});b.beforeEach(function(e,t,n){var r=e.meta,o=e.path,a=e.query,i=(e.name,e.params,o.split("/").slice(1)),c=a.type,s=a.category;switch(document.title=r.title?r.title:"贴近",i[0]){case"feed":"2"==c?"3"==s?b.replace({path:o.replace("feed","comment")}):b.replace({path:o.replace("feed","article")}):n();break;default:n();break}});var v=b,w=n("c0d6"),x=n("bc3a"),k=n.n(x),y=n("f121"),A=k.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).BASE_API,timeout:15e3,withCredentials:!0});A.interceptors.request.use(function(e){var t=y["a"].server+e.url;return e.url=t,ENV.app?ENV.app&&ENV.ios?e.headers["Closer-Agent"]="Closer-Ios":ENV.app&&ENV.android&&(e.headers["Closer-Agent"]="Closer-Android"):e.headers["Closer-Agent"]="Closer-H5",Cookies.get("uid")&&(e.headers["X-Udid"]=Cookies.get("uid")),Cookies.get("aid")&&(e.headers["X-Adid"]=Cookies.get("aid")),(Cookies.get("token")&&-1==e.url.indexOf("auth")&&-1==e.url.indexOf("account")||Cookies.get("token")&&-1!=e.url.indexOf("closer_account.bind_phone"))&&(e.headers.Authorization=Cookies.get("token")),console.log(e.url),e},function(e){return Promise.reject(e).catch(e)}),A.interceptors.response.use(function(e){return e},function(e){var t=n("07f7").default;if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录",router.push({name:"worldcupIndex"});break;case 403:e.message="拒绝访问",router.push({name:"worldcupIndex"});break;case 404:e.message="请求地址出错: ".concat(e.response.config.url);break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:}else e.message="网络错误，请稍后再试！";return e&&e.response&&e.response.data&&e.response.data.message?console.warn(e.response.data.message):console.warn(e.message),t.reject(e).catch(e)});var j=A,O=n("a78e"),S=n.n(O),T=n("3a34"),E=n.n(T),C=n("c6c6"),R=n.n(C),I=n("18a0"),N=n.n(I),U=n("283e"),G=n.n(U),L=(n("4917"),navigator.userAgent.toLowerCase()||navigator.userAgent.toLowerCase()),M=location.href,V={},P=y["a"].href;function J(){for(var e in P){var t=new(URL||webkitURL)(P[e]).hostname,n=M.indexOf(t);n>-1&&n<=8&&(V.env=e)}V.env||console.error("ENV.env不可为空，请确保当前测试页面的location.origin是~/src/config/index.js配置的href值之一!"),V.ua=L,V.app=/closer-(android|ios)/.test(L),V.wx=/micromessenger/.test(L),V.ios=/((iphone\sos)\s([\d_]+))|(-ios)/.test(L),V.android=/((android);?[\s\/]+([\d.]+)?)|(-android)/.test(L),V.version=L.match(/closerapp\/version\/([0-9.]+)/)||"0",V.weibo=/weibo/.test(L),V.qq=/qq/.test(L),V.safari=/version\/([\d.]+)([^S](safari)|[^M]*(mobile)[^S]*(safari))/.test(L),V.chrome=/chrome\/([\d.]+)/.test(L)||/crios\/([\d.]+)/.test(L),V.firefox=/firefox\/([\d.]+)/.test(L),V.ie=/msie\s([\d.]+)/.test(L)||/trident\/[\d](?=[^\?]+).*rv:([0-9.].)/.test(L),V.dev="build"!=V.env;var r=L.match(/closerapp\/version\/([0-9.]+)/);return V.version=r?r[1]:"",V.v120=W("1.2.0"),console.log("当前环境变量window.ENV:",V),B(),V}function B(){var e=function(e){var t=y["a"][e];Object.defineProperty(y["a"],e,{get:function(){return t[V.env]||""}})};for(var t in y["a"])e(t)}function W(e,t){var n=V.version,r=!t||V.android?e:t;if(n&&r){n=n.split("."),r=r.split(".");for(var o=Math.max(n.length,r.length),a=0;a<o;a++){var i=parseInt(n[a]||0),c=parseInt(r[a]||0);if(i>=c)return!0}}return!1}var q=J();if(q.dev)new E.a;function D(){var e=Math.min(screen.width,document.documentElement.getBoundingClientRect().width)/375*16;document.documentElement.style.fontSize=(e>=32?32:e)+"px"}function F(){w["a"].dispatch("get_adcookie",{webUdid:!0}).then(function(){})}r["default"].prototype.ENV=window.ENV=q,window.wx=N.a,window.Axios=j,window.Cookies=S.a,window.MobileDetect=R.a,window.setupWebViewJavascriptBridge=function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)},r["default"].use(G.a,{preload:1.3,error:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAGmAQMAAAAZMJMVAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAADUExURefn5ySG6Q8AAAA+SURBVHja7cExAQAAAMKg9U9tCj+gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAvwGcmgABBZ8R+wAAAABJRU5ErkJggg==",loading:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAGmAQMAAAAZMJMVAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAADUExURefn5ySG6Q8AAAA+SURBVHja7cExAQAAAMKg9U9tCj+gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAvwGcmgABBZ8R+wAAAABJRU5ErkJggg==",attempt:1}),D(),window.onresize=D,F(),new r["default"]({store:w["a"],router:v,render:function(e){return e(l)}}).$mount("#app")},6423:function(e,t,n){},6573:function(e,t,n){},c0d6:function(e,t,n){"use strict";n("b54a"),n("7f7f"),n("96cf");var r,o=n("3040"),a=n("6bde"),i=(n("a481"),n("3b2b"),n("4917"),n("a322")),c=(n("cadf"),n("551c"),n("097d"),n("2b0e")),s=n("2f62"),u=n("76a0"),l=n("ed08"),d=n("f121"),p={admin:{get_auth_path:"closer_auth.get_auth_path",login_with_wechat:"closer_auth.login_with_wechat",closeruser_regist:"closer_auth.closeruser_regist",get_code_by_phone:"closer_account.get_code_by_phone_v2",check:"closer_account.check",check_wechat:"closer_account.check_wechat",info:"closer_user.info",user_show:"closer_user.show",bind_phone:"closer_account.bind_phone",like:"closer_reply.like",add_reply:"closer_reply.add_reply",invite_counts:"closer_user.invite_counts",wechat_config:"closer_share.wechat_config"},command:{show:"closer_subject.show",incr_view:"closer_subject.incr_view",comments:"closer_reply.comments",videos:"ali_vod.accessInfo",report:"closer_report.add",like:"closer_reply.like",add_reply:"closer_reply.add_reply",replys:"closer_reply.replys",reportType:"closer_report.get_report_types",hot_subjects:"closer_subject.hot_subjects"},community:{show:"closer_community.show",community_subject_list_index:"closer_subject.community_subject_list_index",subscription:"closer_community.subscription"},group:{show:"closer_class.show",recruiting:"closer_class.recruiting",group_subject_list:"closer_subject.class_subject_list_index",share_group:"closer_share.outer_group"},activity:(r={get_activity:"closer_activity.get_activity",add_channel:"activity_worldcup.add_channel",check_guess_result:"activity_worldcup.check_guess_result",get_match_list:"activity_worldcup.get_match_list",get_user_guess_list:"activity_worldcup.get_user_guess_list",get_user_guess_statistic:"activity_worldcup.get_user_guess_statistic",guess_match:"activity_worldcup.guess_match",receive_chance:"activity_worldcup.receive_chance"},Object(i["a"])(r,"check_guess_result","activity_worldcup.check_guess_result"),Object(i["a"])(r,"activity_water_chance","activity_water.chance"),Object(i["a"])(r,"activity_water_update","activity_water.update"),Object(i["a"])(r,"activity_water_join","activity_water.join"),Object(i["a"])(r,"get_invite_statistic","closer_invite.get_statistic"),Object(i["a"])(r,"get_invitee_page_list","closer_invite.get_invitee_page_list"),Object(i["a"])(r,"get_yesterday_award_amt","closer_invite.get_yesterday_award_amt"),Object(i["a"])(r,"remind_login","closer_invite.remind_login"),r),statitics:{view_count:"closer_promotion_activity.view_count",get_adcookie:"closer_statistics.get_adcookie"},share:{wechat_config:"closer_share.wechat_config",get_adcookie:"closer_statistics.get_adcookie",common:"closer_statistics.user_action_v2"}},f={get_adcookie:function(e){return Axios.post(p.share.get_adcookie,e).then(function(e){return e.data})},common:function(e){return Axios.post(p.share.common,e).then(function(e){return e.data})},subscription:function(e){return Axios.post(p.community.subscription,e).then(function(e){return e.data})},incr_view:function(e){return Axios.post(p.command.incr_view,e).then(function(e){return e.data})},get_hot_subjects:function(e){return Axios.post(p.command.hot_subjects,e).then(function(e){return e.data})},getCode:function(e){return Axios.post(p.admin.get_code_by_phone,e)},Login:function(e){return Axios.post(p.admin.closeruser_regist,e)},getAuthPath:function(e){return Axios.post(p.admin.get_auth_path,e)},loginWithWechat:function(e){return Axios.post(p.admin.login_with_wechat,e)},getComments:function(e){return Axios.post(p.command.comments,e)},isLike:function(e){return Axios.post(p.command.like,e)},wechatConfig:function(e){return Axios.post(p.admin.wechat_config,e)}},h=(n("a78e"),!0),m={h5Cookies:"",incr_view:0,hotSubjects:[],visible:!1,smsCode:"",user:{},authSuccess:!1,messagelist:{data:[]}},g={get_focus_stat:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,o=n.communityid,a=n.flag,this,e.prev=3,i={communityid:o,flag:a},e.next=7,f.subscription(i);case 7:if(c=e.sent,0!==c.code||!c.result){e.next=17;break}if(0!=a){e.next=13;break}r("SET_FOCUS_STAT",!1,{root:!0}),e.next=15;break;case 13:return r("SET_FOCUS_STAT",!0,{root:!0}),e.abrupt("return",!0);case 15:e.next=18;break;case 17:Object(u["Toast"])({message:c.result,position:"top"});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](3),Object(u["Toast"])({message:e.t0,position:"top"});case 23:case"end":return e.stop()}},e,this,[[3,20]])}));return function(t,n){return e.apply(this,arguments)}}(),get_incr_view:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,this,e.prev=2,e.next=5,f.incr_view(n);case 5:o=e.sent,console.log(o),0===o.code&&r("SET_INCR_VIEW",o.result),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[2,10]])}));return function(t,n){return e.apply(this,arguments)}}(),getHotSubjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,f.get_hot_subjects(n);case 4:o=e.sent,0===o.code&&(o.result.data.map(function(e){return e.content&&(e.content=JSON.parse(e.content)),e}),o.result.data&&r("SET_HOT_SUBJECTS",o.result.data)),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}(),getWxAuth:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,t.state,console.log("getWxAuth"),e.next=4,f.getAuthPath(n).catch(function(e){Object(u["Toast"])("网络开小差啦~")});case 4:r=e.sent,console.log(r.data.result),Object(a["a"])(void 0!=r.data.code)&&0==r.data.code?location.href=r.data.result:r.result&&Object(u["Toast"])(r.result);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getUserInfoWithWx:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,i,c,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,t.state,console.log(n),o=Cookies.get("user"),i=Cookies.get("token"),!o||!i){e.next=10;break}return console.log("user-from-cookie:",JSON.parse(o)),r("SET_USER",JSON.parse(o)),e.abrupt("return",!0);case 10:return e.next=12,f.loginWithWechat(n).catch(function(e){Object(u["Toast"])("网络开小差啦~")});case 12:if(c=e.sent,s=c.data,console.log("data:",s),!Object(a["a"])(void 0!=s.code)||0!=s.code){e.next=27;break}return o=s.result.user,i=s.result.token,console.log("user-from-server:",o),r("SET_USER",o),console.log("token",i),console.log("user",o),Cookies.set("token",i,{expires:7}),Cookies.set("user",o,{expires:7}),e.abrupt("return",!0);case 27:return s.result&&Object(u["Toast"])(s.result),e.abrupt("return",!1);case 29:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getCode:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,u["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),e.next=4,f.getCode(n).catch(function(e){u["Indicator"].close(),Object(u["Toast"])("网络开小差啦~")});case 4:o=e.sent,i=o.data,u["Indicator"].close(),void 0!=Object(a["a"])(i.code)&&0==i.code?r({type:"getSmsCode",data:i}):i.result&&Object(u["Toast"])(i.result);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),login:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.rootState,t.state,r=t.commit,console.log("login, payload ",n),o=/^(0|86|17951)?(1[23456789][0-9])[0-9]{8}$/,!n.phone||o.test(n.phone)){e.next=6;break}return Object(u["Toast"])("请输入正确的手机号"),e.abrupt("return");case 6:if(0!=n.token.length){e.next=9;break}return Object(u["Toast"])("请输入验证码"),e.abrupt("return");case 9:return Cookies.get("uid")&&(n["udid"]=Cookies.get("uid")),Cookies.get("aid")&&(n["adid"]=Cookies.get("aid")),n["protocol"]="WEB_SOCKET",u["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),e.next=15,f.Login(n).catch(function(e){u["Indicator"].close(),Object(u["Toast"])("网络开小差啦~")});case 15:if(i=e.sent,c=i.data,u["Indicator"].close(),void 0==Object(a["a"])(c.code)||0!=c.code){e.next=28;break}if(!c.result||!c.result.token){e.next=25;break}if(Cookies.set("token",c.result.token,{expires:60}),!c.result.user){e.next=25;break}if(Cookies.set("user",JSON.stringify(c.result.user),{expires:60}),!n.push){e.next=25;break}return e.abrupt("return",c.result.user);case 25:r({type:"hide"}),e.next=31;break;case 28:return Object(u["Toast"])("网络开小差啦，请稍后再试"),u["Indicator"].close(),e.abrupt("return");case 31:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getCommentsList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,console.log("getCommentsList--",n),e.next=4,f.getComments(n).catch(function(e){Object(u["Toast"])("网络开小差啦~")});case 4:o=e.sent,i=o.data,void 0!=Object(a["a"])(i.code)&&0==i.code&&r({type:"setCommentList",data:i});case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),checkIsLike:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.next=3,f.isLike(n).catch(function(e){Object(u["Toast"])("网络开小差啦~")});case 3:r=e.sent,Object(a["a"])(void 0!=r.code)&&0==r.code||r.result&&Object(u["Toast"])(r.result);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},_={SET_H5COOKIES:function(e,t){e.h5Cookies=t},SET_INCR_VIEW:function(e,t){console.log("para:",t),e.incr_view=t},SET_HOT_SUBJECTS:function(e,t){console.log("SET_HOT_SUBJECTS",t),e.hotSubjects=t},SET_USER:function(e,t){e.user=t,e.isLogin=!0},setAuthStatus:function(e){e.authSuccess=!0},show:function(e){e.visible=!0},hide:function(e){e.visible=!1},getSmsCode:function(e,t){e.smsCode=t},setCommentList:function(e,t){e.messagelist=t.data.result.data}},b={namespaced:h,state:m,actions:g,mutations:_};function v(e){return w.apply(this,arguments)}function w(){return w=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Axios.get("".concat(p.command.show,"?subjectid=").concat(t)).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)})),w.apply(this,arguments)}var x={GET_APP_TOKEN:"",version_1_2:!1,res:{},content:{},exist:!0},k={fetch_content:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,a=n.id,e.prev=2,e.next=5,v(a);case 5:if(i=e.sent,0==i.code){e.next=10;break}r("GET_EXIST_STATUS",!1),e.next=17;break;case 10:if(window.ENV.app){e.next=14;break}if(!(0===i.result.int_verify||-1===i.result.int_verify&&4!=i.result.int_category&&6!=i.result.int_category||i.result.bool_delete)){e.next=14;break}return r("GET_EXIST_STATUS",!1),e.abrupt("return");case 14:i.result.content&&(c=JSON.parse(i.result.content),o.CONTENT_IMGS,o.IMG_INDEX=0,2===i.result.int_type&&(s=Object(l["j"])(c.html),s&&(c.html=s)),r("SET_CONTENT",c)),r("SET_RES",i.result),o.res=i.result;case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e["catch"](2),console.log("content.catch"),r("GET_EXIST_STATUS",!1),e.abrupt("return");case 24:case"end":return e.stop()}},e,this,[[2,19]])}));return function(t,n){return e.apply(this,arguments)}}()},y={GET_USER_AGENT:function(e,t){var n=t.nvg.toLowerCase(),r=t.ref,o=n.indexOf("closer-ios")>-1||n.indexOf("closer-android")>-1,a=o||r.indexOf("/invite")>-1;e.GET_MESSAGE_STATE=!a,e.GET_IS_APP=o,e.agent=n,e.isPre=r.indexOf("?view=pre")>-1},SET_CONTENT:function(e,t){e.content=t},SET_RES:function(e,t){e.res=t},GET_EXIST_STATUS:function(e,t){e.exist=t}},A={namespaced:!0,state:x,actions:k,mutations:y};function j(e){return O.apply(this,arguments)}function O(){return O=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.command.show,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),O.apply(this,arguments)}var S={namespaced:!0,state:{discuss:{},content:{},subject:{},subjectExist:!0},mutations:{setContent:function(e,t){e.content=t},setDiscuss:function(e,t){e.discuss=t},setSubject:function(e,t){e.subject=t},setSubjectState:function(e,t){e.subjectExist=t}},actions:{getSubject:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c,s,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,e.prev=1,e.next=4,j(n);case 4:if(a=e.sent,i=a.data,console.log("getSubject:",i),"undefined"==typeof i.code||0!=i.code){e.next=15;break}if(window.ENV.app){e.next=12;break}if(!(0===i.result.int_verify||-1===i.result.int_verify&&4!=i.result.int_category&&6!=i.result.int_category||i.result.bool_delete)){e.next=12;break}return r("setSubjectState",!1),e.abrupt("return");case 12:i.result.content&&(c=JSON.parse(i.result.content),2===i.result.int_type&&(o.CONTENT_IMGS,o.IMG_INDEX=0,s=Object(l["j"])(c.html),s&&(c.html=s),c.discuss&&(u=c.discuss.map(function(e){if(e.text){var t=/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g,n=e.text.match(t);n?(e.weblink=!0,n.map(function(n){var r='<a href="'.concat(n,'" target="_blank">').concat(n,"</a>"),o=e.text.replace(t,r);e.newText=o})):e.weblink=!1}return e.image&&(e.image["index"]=o.IMG_INDEX,o.CONTENT_IMGS.push(e.image.link),o.IMG_INDEX++),e}),r("setDiscuss",u)),3===i.result.int_category&&c.end_html&&(d=Object(l["j"])(c.end_html),d&&(c.end_html=d)),r("setContent",c),delete i.result.content,o.res=i.result,r("setSubject",i.result))),e.next=16;break;case 15:r("setSubjectState",!1);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),console.error("getSubject ",e.t0),r("setSubjectState",!1);case 22:case"end":return e.stop()}},e,this,[[1,18]])}));return function(t,n){return e.apply(this,arguments)}}()}};function T(e){return E.apply(this,arguments)}function E(){return E=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.community.show,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),E.apply(this,arguments)}function C(e){return R.apply(this,arguments)}function R(){return R=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.community.community_subject_list_index,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),R.apply(this,arguments)}function I(e){return N.apply(this,arguments)}function N(){return N=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.community.subscription,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),N.apply(this,arguments)}function U(e){return G.apply(this,arguments)}function G(){return G=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.group.recruiting,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),G.apply(this,arguments)}var L={namespaced:!0,state:{communityShow:{},groupList:{},descResult:{},isFollow:!1,visible:!1},mutations:{setCommunityShow:function(e,t){console.log("payload",t);var n=t.data;e.communityShow=n.result,console.log("communityShow",e.communityShow)},getGroupList:function(e,t){console.log("payload",t);var n=t.data;e.groupList=n.result,console.log("groupList",e.groupList)},getDescResult:function(e,t){console.log("payload",t),e.descResult=t,console.log("descResult",e.descResult)},isFollow:function(e,t){console.log("payload",t),e.isFollow=t},show:function(e){e.visible=!0},hide:function(e){e.visible=!1}},actions:{getCommunityShow:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,i,c,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,i={communityid:n},e.next=4,T(i).catch(function(e){Object(u["Toast"])("网络开小差啦~")});case 4:c=e.sent,s=c.data,console.log("data--",s),Object(a["a"])(void 0!=s.code&&0==s.code)?(r({type:"setCommunityShow",data:s}),o.res=s.result):s.result&&Object(u["Toast"])(s.result);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getSubscription:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,t.rootState,e.next=3,I(n).catch(function(e){Object(u["Toast"])("网络开小差啦~")});case 3:o=e.sent,i=o.data,console.log("data",i),Object(a["a"])(void 0!=i.code)&&0==i.code?i&&(r("isFollow",!0),r("show"),r("SET_FOCUS_STAT","true",{root:!0})):(i.result,Object(u["Toast"])(i.result));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getGroupList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,e.next=3,U(n).catch(function(e){Object(u["Toast"])("网络开小差啦~")});case 3:o=e.sent,i=o.data,Object(a["a"])(void 0!=i.code)&&0==i.code?r({type:"getGroupList",data:i}):i.result&&Object(u["Toast"])(i.result);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}};function M(e){return V.apply(this,arguments)}function V(){return V=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.command.add_reply,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),V.apply(this,arguments)}function P(e){return J.apply(this,arguments)}function J(){return J=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(p.statitics.get_adcookie,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),J.apply(this,arguments)}var B,W={namespaced:!0,state:{visible:!1,replyData:{}},mutations:{show:function(e){e.visible=!0},hide:function(e){e.visible=!1},updateData:function(e,t){console.log(1,t),e.replyData=t}},actions:{addReplyData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,o=t.state,u["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),console.log(2,n),e.next=5,M(n).catch(function(e){u["Indicator"].close(),Object(u["Toast"])("网络开小差啦~")});case 5:i=e.sent,c=i.data,console.log("2-data---",c),u["Indicator"].close(),void 0!=Object(a["a"])(c.code)&&0==c.code?(r({type:"updateData",data:c}),r({type:"show"}),console.log("state.show:",o.visible)):c.result&&Object(u["Toast"])(c.result);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getAdCookie:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.rootState,e.next=3,P(n).catch(function(e){Object(u["Toast"])("网络开小差啦~")});case 3:if(r=e.sent,o=r.data,void 0==Object(a["a"])(o.code)||0!=o.code){e.next=11;break}return console.log(1,o),o.result&&(i=o.result,i.udid&&Cookies.set("uid",i.udid,{expires:30})),e.abrupt("return",null);case 11:o.result&&Object(u["Toast"])(o.result);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}},q={admin:{get_auth_path:"closer_auth.get_auth_path",login_with_wechat:"closer_auth.login_with_wechat",closeruser_regist:"closer_auth.closeruser_regist",get_code_by_phone:"closer_account.get_code_by_phone_v2",check:"closer_account.check",check_wechat:"closer_account.check_wechat",info:"closer_user.info",user_show:"closer_user.show",bind_phone:"closer_account.bind_phone",like:"closer_reply.like",add_reply:"closer_reply.add_reply",invite_counts:"closer_user.invite_counts",wechat_config:"closer_share.wechat_config"},command:{show:"closer_subject.show",incr_view:"closer_subject.incr_view",comments:"closer_reply.comments",videos:"ali_vod.accessInfo",report:"closer_report.add",like:"closer_reply.like",add_reply:"closer_reply.add_reply",replys:"closer_reply.replys",reportType:"closer_report.get_report_types",hot_subjects:"closer_subject.hot_subjects"},community:{show:"closer_community.show",community_subject_list_index:"closer_subject.community_subject_list_index",subscription:"closer_community.subscription"},group:{show:"closer_class.show",recruiting:"closer_class.recruiting",group_subject_list:"closer_subject.class_subject_list_index",share_group:"closer_share.outer_group"},activity:(B={get_activity:"closer_activity.get_activity",add_channel:"activity_worldcup.add_channel",check_guess_result:"activity_worldcup.check_guess_result",get_match_list:"activity_worldcup.get_match_list",get_user_guess_list:"activity_worldcup.get_user_guess_list",get_user_guess_statistic:"activity_worldcup.get_user_guess_statistic",guess_match:"activity_worldcup.guess_match",receive_chance:"activity_worldcup.receive_chance"},Object(i["a"])(B,"check_guess_result","activity_worldcup.check_guess_result"),Object(i["a"])(B,"activity_water_chance","activity_water.chance"),Object(i["a"])(B,"activity_water_update","activity_water.update"),Object(i["a"])(B,"activity_water_join","activity_water.join"),Object(i["a"])(B,"get_invite_statistic","closer_invite.get_statistic"),Object(i["a"])(B,"get_invitee_page_list","closer_invite.get_invitee_page_list"),Object(i["a"])(B,"get_yesterday_award_amt","closer_invite.get_yesterday_award_amt"),Object(i["a"])(B,"remind_login","closer_invite.remind_login"),B),statitics:{view_count:"closer_promotion_activity.view_count",get_adcookie:"closer_statistics.get_adcookie"}};function D(e){return F.apply(this,arguments)}function F(){return F=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(q.group.share_group,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),F.apply(this,arguments)}function H(e){return X.apply(this,arguments)}function X(){return X=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(q.group.group_subject_list,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),X.apply(this,arguments)}var K,z={namespaced:!0,state:{group:{},groupFeedList:[],groupFeedTitle:""},mutations:{SET_GROUP_INFO:function(e,t){console.log("set group",t),e.group=t},SET_GROUP_LIST:function(e,t){console.log("set group list",t),e.groupFeedList=t},SET_GROUP_FEED_TITLE:function(e,t){console.log("set group title",t),e.groupFeedTitle=t}},actions:{getGroupInfo:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,t.rootState,e.prev=1,e.next=4,D(n);case 4:o=e.sent,a=o.data,console.log("code",a),0===a.code&&a.result&&r("SET_GROUP_INFO",a.result),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.error("getGroupInfo",e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t,n){return e.apply(this,arguments)}}(),getGroupList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,o=t.state,t.rootState,a=t.dispatch,e.prev=1,e.next=4,H(n);case 4:if(i=e.sent,c=i.data,0!==c.code){e.next=11;break}return e.next=9,c.result.data.map(function(e){return e.content=JSON.parse(e.content),e});case 9:s=e.sent,s.length>0?(r("SET_GROUP_LIST",s),r("SET_GROUP_FEED_TITLE","群作品")):a("getCommunityList",{communityid:o.group.group_info.communityid});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),console.error("getGroupList",e.t0);case 16:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t,n){return e.apply(this,arguments)}}(),getCommunityList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,t.rootState,console.log(n),e.prev=2,e.next=5,C(n);case 5:if(o=e.sent,a=o.data,console.log("getCommunityList",a),0!==a.code){e.next=14;break}return e.next=11,a.result.data.map(function(e){return e.content&&(e.content=JSON.parse(e.content)),e});case 11:i=e.sent,r("SET_GROUP_LIST",i),r("SET_GROUP_FEED_TITLE","热门文章");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](2),console.error("getGroupList",e.t0);case 19:case"end":return e.stop()}},e,this,[[2,16]])}));return function(t,n){return e.apply(this,arguments)}}()}};c["default"].use(s["a"]);t["a"]=new s["a"].Store({state:(K={UA:"",IS_APP:!1,IS_NEW_USER:!1,IS_DEV:!1,IMG_INDEX:0,CONTENT_IMGS:[],content:"",exist:!1,extension_text:"",alert_stat:!1,is_follow:!1,get_login_type:!1,visibleLogin:"",h5Cookies:"",isLogin:!1,user:{},h5Adid:""},Object(i["a"])(K,"extension_text",""),Object(i["a"])(K,"get_login_type",""),Object(i["a"])(K,"visibleLogin",!1),Object(i["a"])(K,"authSuccess",!1),Object(i["a"])(K,"res",{}),Object(i["a"])(K,"shareLink",""),Object(i["a"])(K,"preShow",!1),Object(i["a"])(K,"preImgs",[]),Object(i["a"])(K,"preIndex",0),Object(i["a"])(K,"wxConfig",{}),Object(i["a"])(K,"shareConfig",{title:"贴近一点，看身边",desc:"能赚稿费的本地内容社区",link:"",imgUrl:""}),K),mutations:{SET_CONTENT:function(e,t){e.content=t},GET_EXIST_STATUS:function(e,t){e.exist=t},SET_RES:function(e,t){e.res=t},SET_EXTENSION_TEXT:function(e,t){e.extension_text=t},SHOW_ALERT:function(e,t){e.alert_stat=t},SET_FOCUS_STAT:function(e,t){e.is_follow=t},GET_LOGIN_TYPE:function(e,t){e.get_login_type=t},SET_VISIBLE_LOGIN:function(e,t){e.visibleLogin=t},GET_VERSION:function(e){var t,n,r,o=navigator.userAgent.toLowerCase();if(o.indexOf("android")>-1||o.indexOf("adr")>-1||o.indexOf("linux")>-1){if(t="android",r="Android",o.match(new RegExp("android\\s(\\d+(?:\\.\\d*)+)"))){var a=o.match(new RegExp("android\\s(\\d+(?:\\.\\d*)+)"));n=a[1].replace(/\./g,"_")}}else if(o.indexOf("iphone")>-1||o.indexOf("ipad")>-1||o.indexOf("safari")>-1){if(t="ios",r="IOS",o.match(new RegExp("version/(\\d+(?:\\.\\d*)+)"))){var i=o.match(new RegExp("version/(\\d+(?:\\.\\d*)+)"));n=i[1].replace(/\./g,"_")}}else t="windows",r="Windows";e.nvgversion=n,e.nvgtype=t,e.nvgTypeToPowerCase=r},SET_H5COOKIES:function(e,t){console.log("h5",t),e.h5Cookies=t},SET_ENTER_TIME:function(e,t){e.enter_time=t},SET_USER:function(e,t){e.user=t,e.isLogin=!0},setAuthStatus:function(e){e.authSuccess=!0},SET_WX_CONFIG:function(e,t){e.wxConfig=t}},modules:{common:b,article:A,comment:S,community:L,message:W,group:z},actions:{getWxAuth:function(e,t){var n=e.commit,r=e.state;console.log("getWxAuth");var o={path:d["a"].wxAuthorization+encodeURIComponent(d["a"].href+t)};return f.getAuthPath(o).then(function(e){var t=e.data;console.log(t.result),Object(a["a"])(void 0!=t.code)&&0==t.code?(location.href=t.result,n("setAuthStatus"),console.log("state.authSuccess---",r.authSuccess)):t.result&&Object(u["Toast"])(t.result)}).catch(function(e){Object(u["Toast"])("网络开小差啦~")})},getUserInfoWithWx:function(e,t){var n=e.commit;e.state;console.log(t);var r=Cookies.get("user"),o=Cookies.get("token");return r&&o?(console.log("user-from-cookie:",JSON.parse(r)),n("SET_USER",JSON.parse(r)),!0):f.loginWithWechat(t).then(function(e){var t=e.data;return console.log("data:",t),Object(a["a"])(void 0!=t.code)&&0==t.code?(r=t.result.user,o=t.result.token,console.log("user-from-server:",r),n("SET_USER",r),console.log("token",o),console.log("user",r),Cookies.set("token",o,{expires:7}),Cookies.set("user",r,{expires:7}),r):(t.result&&Object(u["Toast"])(t.result),!1)}).catch(function(e){Object(u["Toast"])("网络开小差啦~")})},get_adcookie:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=n.webUdid,this,e.prev=3,a={webUdid:o},e.next=7,f.get_adcookie(a);case 7:if(i=e.sent,0!==i.code){e.next=11;break}return r("SET_H5COOKIES",i.result.udid),e.abrupt("return",i.result.udid);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),console.log("e==",e.t0);case 16:case"end":return e.stop()}},e,this,[[3,13]])}));return function(t,n){return e.apply(this,arguments)}}(),down_adcookies:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.state,n=t.rootState,t.commit,this,r={webUdid:!1,deviceType:n.nvgtype||"ios",deviceVersion:n.nvgversion||"11_0_0",adid:Cookies.get("h5Adid")||"closer-t1"},e.next=4,f.get_adcookie(r);case 4:return e.sent,e.abrupt("return",!0);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),down_statistics:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c,s,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,t.commit,o=n.p1,a=Cookies.get("user")?JSON.parse(Cookies.get("user")).objectID:r.auth?r.auth.objectID:null,i=r.h5Cookies?r.h5Cookies:null,this,c={userId:a,deviceId:null,cookie:i,platform:"H5",attachPlatform:r.nvgTypeToPowerCase||null,communityId:r.res.communityid||null,title:r.res.title||null,dreason:null,time:Date.now(),cost:Date.now()-r.enter_time||0,totalTime:r.duration_time||0},e.next=7,Object(l["k"])(o,c);case 7:return s=e.sent,e.next=10,f.common(s);case 10:if(u=e.sent,0!==u.code){e.next=13;break}return e.abrupt("return",!0);case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),wx_config:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,c,s,d,p,h,m,g,_,b,v,w;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,o=t.commit,!ENV.wx){e.next=21;break}return console.log("wx_config"),a={url:location.href},e.next=6,f.wechatConfig(a).catch(function(e){Object(u["Toast"])("网络开小差啦，请稍后再试")});case 6:if(i=e.sent,c=i.data,"undefined"==typeof c.code||0!=c.code){e.next=19;break}if(o("SET_WX_CONFIG",c.result),s=c.result,"{}"!=JSON.stringify(r.res)||"{}"!=JSON.stringify(r.group.group)){e.next=15;break}return console.info("not index"),Cookies.get("shareConfig")&&Object(l["m"])(s,JSON.parse(Cookies.get("shareConfig"))),e.abrupt("return");case 15:if(location.href.indexOf("/community")>-1)d=r.res.name?r.res.name:"栏目主页",h=r.res.description?r.res.description:"贴近一点 看身边",p=r.res.slogo?r.res.slogo:r.res.blogo;else if(location.href.indexOf("/group")>-1){if(console.log("state.res",JSON.stringify(r.group.group)),r.group.group&&r.group.group.group_info.group){if(m=r.group.group.group_info.group,d=m.name?m.name:"贴近群组",m.description)try{g=JSON.parse(r.group.group.group_info.group.description),h=g[0].content?g[0].content:"贴近一点 看身边"}catch(e){h=r.group.group.group_info.group.description}else h="贴近一点 看身边";p=Object(l["i"])(m.avatar)}}else _=r.content,0===r.res.int_type?(d=_.text?_.text:"分享图片",_.images&&_.images.length>0?(b=_.images.map(function(e){return e="[图片]",e}),h=b.join(" "),p=Object(l["i"])(_.images[0].link)):(h="[图片]",p="")):1===r.res.int_type?(d=_.text?_.text:"分享视频",_.videos&&_.videos.length>0?(v=_.videos.map(function(e){return e="[视频]",e}),h=v.join(" "),p=Object(l["i"])(_.videos[0].imageUrl)):(h="[视频]",p="")):(d=r.res.title?r.res.title:_.text?_.text:_.summary,h=_.summary?_.summary:"分享文章",p=Object(l["i"])(r.res.cover)?Object(l["i"])(r.res.cover):Object(l["i"])(r.res.bigcover));w={title:d,desc:h,imgUrl:p},Cookies.set("shareConfig",w),Object(l["m"])(s,w);case 19:e.next=22;break;case 21:return e.abrupt("return");case 22:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}})},ed08:function(e,t,n){"use strict";n.d(t,"g",function(){return i}),n.d(t,"d",function(){return c}),n.d(t,"j",function(){return s}),n.d(t,"i",function(){return u}),n.d(t,"h",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"l",function(){return p}),n.d(t,"k",function(){return f}),n.d(t,"f",function(){return g}),n.d(t,"a",function(){return b}),n.d(t,"m",function(){return w}),n.d(t,"c",function(){return x}),n.d(t,"e",function(){return k});n("96cf"),n("b54a");var r=n("3040"),o=(n("a481"),n("ac6a"),n("4917"),n("28a5"),n("f121")),a=n("c0d6");function i(){location.href=o["a"].download}function c(e,t){var n=new Date(e),r=n.getFullYear(),o=n.getMonth()+1,a=n.getDate(),i=n.getHours(),c=n.getMinutes(),s=n.getSeconds();return o<10&&(o="0"+o),a<10&&(a="0"+a),i<10&&(i="0"+i),c<10&&(c="0"+c),s<10&&(s="0"+s),"date"==t?r+"-"+o+"-"+a:"time"==t?r+"-"+o+"-"+a+" "+i+":"+c:void 0}function s(e){var t=/<img.*?(?:>|\/>)/gi,n=e.match(t);if(n){var r=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,o=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,i=/height=[\'\"]?([^\'\"]*)[\'\"]?/i;n.forEach(function(t,n){var c,s,u,l=t.match(r),d=t.match(o),p=t.match(i);l?(d&&p?(d[1]<200?(c=d[1]+"px",u=p[1]+"px"):(c="100%",u=100*p[1]/d[1]+"%"),u,s=t.replace(/src=/g,'style="width: '.concat(c,"; height: ").concat(u,'; background: #e7e7e7; max-width: 100%;" data-feedlazy="feedlazy" data-index="').concat(n+1,'" data-src='))):(c="100%",u="auto","28.27vw",s=t.replace(/src=/g,'style="width: '.concat(c,'; background: #e7e7e7; max-width: 100%;" data-feedlazy="feedlazy2" data-index="').concat(n+1,'" data-src='))),console.log("srcArray[i]",l[n]),a["a"].state.CONTENT_IMGS.push(l[n]),a["a"].state.IMG_INDEX++):s="",e=e.replace(t,'<div class="img-box">'.concat(s,"</div>"))})}var c=/<video.*?(?:>|\/>|<\/video>)/gi,s=e.match(c);if(s){var u,l=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,d=/vid=[\'\"]?([^\'\"]*)[\'\"]?/i,p=/imageUrl=[\'\"]?([^\'\"]*)[\'\"]?/i,f=/poster=[\'\"]?([^\'\"]*)[\'\"]?/i,h=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,m=/height=[\'\"]?([^\'\"]*)[\'\"]?/i;s.forEach(function(t,n){var r,o,a,i,c=t.match(l),s=t.match(d),g=t.match(p),_=t.match(f),b=t.match(h),v=t.match(m),w="";r=s?s[1]:"",o=c?c[1]:"",i=parseInt(v[1])/parseInt(b[1]),a=g?g[1]:_?_[1]:"",i>1&&(w="video-box-vertical"),u=window.ENV.app?"<section \n          class='video-box video-box-native'\n          data-vid='".concat(r,"'\n          data-uid='").concat(o,"'\n          data-bg='").concat(a,"'>\n          <section \n            class='video-wrap'\n            data-vid='").concat(r,"'\n            data-uid='").concat(o,"'\n            >\n            <img data-src='").concat(a,"'\n              class='video-play-poster'/>\n            <span\n              class='video-play-icon' data-vid='").concat(r,"' data-uid='").concat(o,"'></span>\n          </section>\n        </section>"):"<section \n          class='video-box video-box-h5 ".concat(w,"'\n          data-vid='").concat(r,"'\n          data-uid='").concat(o,"'\n          >\n          <section \n            class='video-wrap'\n            data-vid='").concat(r,"'\n            data-uid='").concat(o,"'\n            >\n              <video src='").concat(c[1],"'\n              class='video-tag'\n              preload='none'\n              controls\n              controlsList='nodownload'\n              poster='").concat(a,"'\n              data-bg='").concat(a,'\'\n              playsinline="true"\n              webkit-playsinline="true"\n              x5-playsinline="true"\n              >\n              </video>\n          </section>\n        </section>'),e=e.replace(t,u)})}var g=/<iframe.*?(?:>|\/>|<\/iframe>)/gi,_=e.match(g);if(_){var b=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,v=/height=[\'\"]?([^\'\"]*)[\'\"]?/i;_.forEach(function(t,n){var r=t.match(b),o=t.match(v),a=t.split(r[0]),i="".concat(a[0],'width="100%"').concat(a[1]),c=i.split(o[0]),s="".concat(c[0],' height="240" ').concat(c[1]),u='<section class="imgbox tiejin-iframe">\n                  '.concat(s,"</iframe>\n                </section>");e=e.replace(t,u)})}return e}function u(e,t,n){var r=o["a"].file;if(e){var a=n||500;return"src"===t?-1!==e.indexOf("://")?e+"?s="+a:r+e+"?s="+a:-1!==e.indexOf("://")?e:r+e}}function l(e,t){var n=new Date(e),r=new Date,o=n.getTime(n),a=r.getTime(r),i=a-o,c=i/1e3/60/60/24/30,s=Math.floor(c),u=i/1e3/60/60/24,l=Math.floor(u),d=i/1e3/60/60-24*l,p=Math.floor(d),f=i/1e3/60-1440*l-60*p,h=Math.floor(f),m=i/1e3-86400*l-3600*p-60*h,g=Math.floor(m);return s>1?s+"个月前":l>0?l+"天前":p>0?p+"小时前":h>10?h+"分钟前":g>0?"刚刚":void 0}function d(e,t){var n=t||null,r=e||null,o=!(!window.ENV.app||!window.ENV.ios);window.ENV.v120?o?window.WebViewJavascriptBridge&&setupWebViewJavascriptBridge(function(e){e.callHandler("playVideo",{url:r,vid:n})}):"undefined"!=typeof window.bridge&&window.bridge.playVideo(n,r):location.href="/?vid=".concat(n)}function p(e){var t=a["a"].state.CONTENT_IMGS,n=parseInt(e),r={imgs:t,index:n},o=!(!window.ENV.app||!window.ENV.ios);o?window.WebViewJavascriptBridge&&setupWebViewJavascriptBridge(function(e){e.callHandler("tapImage",r)}):"undefined"!=typeof window.bridge&&window.bridge.tapImage(JSON.stringify(r))}function f(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function h(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}if(v()){e.next=14;break}if(!(t.indexOf("?from=group")>-1)){e.next=9;break}return e.next=5,this.getParam("groupid",t);case 5:e.sent,location.href="closer://jump/to/group",e.next=10;break;case 9:t.indexOf("pkgname=com.ums.closer")>-1?location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer":location.href=t;case 10:return setTimeout(function(){location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer"},1500),e.abrupt("return");case 14:t.indexOf("?from=group")>-1?location.href=t:t.indexOf("pkgname=com.ums.closer")>-1?location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer":location.href="".concat(location.protocol,"//").concat(location.host,"?downurl=").concat(t);case 15:e.next=18;break;case 17:location.href="".concat(location.protocol,"//").concat(location.host);case 18:case"end":return e.stop()}},e,this)})),m.apply(this,arguments)}function g(e){return _.apply(this,arguments)}function _(){return _=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,c,s,u,l,d,p,f,m;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.store,r=t.route,o=t.str,a=t.defaultStr,i=t.redirectUrl,e.next=3,n.dispatch("down_adcookies");case 3:if(c=e.sent,!c){e.next=23;break}return l=r.params.id||r.params.messageid,p=JSON.parse,r.path.indexOf("/community")>-1?(s="community",u="closer://community/".concat(l)):r.path.indexOf("/feed")>-1||r.path.indexOf("/article")>-1||r.path.indexOf("/comment")>-1?(s="article",u="closer://feed/".concat(l),s=1===n.state.res.int_type?"video":"article"):r.path.indexOf("/group")>-1?(s="group",u="closer://group/".concat(l)):(s="inviter",u="closer://jump/to/mine",l=p(Cookies.get("inviter")).id),d="string"===typeof o&&o?o:a,f={action:"click",objectType:s||"article",objectId:l||null,position:d,progress:1,recommendId:null},e.next=11,n.dispatch("down_statistics",{p1:f});case 11:if(m=e.sent,!m){e.next=23;break}if(!i){e.next=22;break}if("wx"!==i){e.next=18;break}return e.abrupt("return",!0);case 18:return h(i),e.abrupt("return");case 20:e.next=23;break;case 22:h(u);case 23:case"end":return e.stop()}},e,this)})),_.apply(this,arguments)}function b(e,t){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push("".concat(r,"=").concat(t[r]));return e+(e.indexOf("?")>-1?"&":"?")+n.join("&")}function v(){if("undefined"!=typeof window){var e=navigator.userAgent.toLowerCase(),t=!1,n=!1,r=!1;return t=/micromessenger/i.test(e),n=/qq/i.test(e),/mqqbrowser/i.test(e)&&(n=!1),r=/weibo/i.test(e),t||n||r}}function w(e,t,n){console.info("wxshare content:",t),e.signature&&e.appId&&e.nonceStr&&e.timestamp&&(wx.config({debug:!1,signature:e.signature,appId:e.appId,nonceStr:e.nonceStr,timestamp:e.timestamp,jsApiList:n||["onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","onMenuShareTimeline"]}),wx.ready(function(){wx.onMenuShareAppMessage({title:t.title,desc:t.desc,imgUrl:t.imgUrl,link:t.link||location.href,type:"",dataUrl:"",success:function(){Toast("分享成功~")}}),wx.onMenuShareTimeline({title:t.title,imgUrl:t.imgUrl,link:t.link||location.href,success:function(){Toast("分享成功~")}})}),wx.error(function(e){console.error("wx.config.error",e)}))}function x(){var e;if(document.querySelectorAll("img[data-index]")&&(e=document.querySelectorAll("img[data-index]"),e)){var t=[];Array.prototype.forEach.call(e,function(n,r){console.log("-----",n.dataset.src),n.dataset.index&&n.dataset.src&&(t.push({current:{src:n.dataset.src},index:r}),e[r].onclick=function(){return function(){a["a"].state.preIndex=r,a["a"].state.preShow=!0}}())}),a["a"].state.preImgs=t}}function k(e){var t=Date.now(),n=+new Date(e),r=t-n,o="",a="";return r>=6048e5?o=c(e,"date"):r>=864e5?(o=parseInt(r/864e5),a="天前"):r>=36e5?(o=parseInt(r/36e5),a="小时前"):r>=6e4?(o=parseInt(r/6e4),a="分钟前"):o="刚刚",o+a}},f121:function(e,t,n){"use strict";t["a"]={href:{build:"https://a.tiejin.cn",dev:"https://a-qa.tiejin.cn",sandbox:"https://t1-sandbox.tiejin.cn",local:"http://local.tiejin.cn:9999"},file:{build:"https://file.tiejin.cn",dev:"https://file-qa.tiejin.cn",sandbox:"https://file-sandbox.tiejin.cn",local:"https://file-sandbox.tiejin.cn"},server:{build:"https://api.tiejin.cn/command/",dev:"https://api-qa.tiejin.cn/command/",sandbox:"https://api-sandbox.tiejin.cn/command/",local:"https://api-sandbox.tiejin.cn/command/"},download:{build:"https://download.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588",dev:"https://download-qa.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588",sandbox:"https://download-sandbox.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588",local:"https://download-sandbox.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588"},wxAuthorization:{build:"https://h5.tiejin.cn/redirect?redirectUrl=",dev:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl=",sandbox:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl=",local:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl="}}}});
//# sourceMappingURL=app.c7ab54c5.js.map