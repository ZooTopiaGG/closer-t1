(function(e){function t(t){for(var r,o,s=t[0],c=t[1],u=t[2],l=0,d=[];l<s.length;l++)o=s[l],a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={app:0},a={app:0},i=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-1d017f67":"3529f143","chunk-2256d179":"3711231d","chunk-42010e07":"14837d31","chunk-61f998a6":"5b538ca6","chunk-6db2e062":"a04c9cee","chunk-431cd0e7":"f14573a2","chunk-6eb1c1a0":"1af14705","chunk-7a3567d6":"8428be66","chunk-7afb5c86":"a66bda03","chunk-8aada2d8":"9eea182e"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-1d017f67":1,"chunk-2256d179":1,"chunk-42010e07":1,"chunk-61f998a6":1,"chunk-6db2e062":1,"chunk-431cd0e7":1,"chunk-6eb1c1a0":1,"chunk-7a3567d6":1,"chunk-7afb5c86":1,"chunk-8aada2d8":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-1d017f67":"97fd6b9c","chunk-2256d179":"5cf2f736","chunk-42010e07":"4be6a096","chunk-61f998a6":"7e4432f5","chunk-6db2e062":"c42dbd0b","chunk-431cd0e7":"1ba7a4d3","chunk-6eb1c1a0":"0e2c65b2","chunk-7a3567d6":"fab29c03","chunk-7afb5c86":"0554f541","chunk-8aada2d8":"0b94f634"}[e]+".css",o=c.p+r,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var s=a[i],u=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(u===r||u===o))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){s=l[i],u=s.getAttribute("data-href");if(u===r||u===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.request=r,n(a)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=i);var u,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=s(e),u=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");i.type=r,i.request=o,n[1](i)}a[e]=void 0}};var p=setTimeout(function(){u({type:"timeout",target:d})},12e4);d.onerror=d.onload=u,l.appendChild(d)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"12ae":function(e,t,n){e.exports=n.p+"img/loading.f4bfeab7.gif"},"2a8d":function(e,t,n){},"2f74":function(e,t,n){},"3ff4":function(e,t,n){"use strict";var r=n("2a8d"),o=n.n(r);o.a},"54a9":function(e,t,n){"use strict";var r=n("5a5d"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i={name:"App"},s=i,c=n("2877"),u=Object(c["a"])(s,o,a,!1,null,null,null);u.options.__file="App.vue";var l=u.exports,d=(n("6423"),n("2f74"),n("6573"),n("aa35"),n("a481"),n("28a5"),n("7f7f"),n("8c4f")),p=function(){return Promise.all([n.e("chunk-6db2e062"),n.e("chunk-6eb1c1a0")]).then(n.bind(null,"e878"))},h=function(){return Promise.all([n.e("chunk-6db2e062"),n.e("chunk-7a3567d6")]).then(n.bind(null,"8927"))},f=function(){return n.e("chunk-42010e07").then(n.bind(null,"839f"))},m=function(){return n.e("chunk-1d017f67").then(n.bind(null,"dc52"))},g=function(){return Promise.all([n.e("chunk-6db2e062"),n.e("chunk-431cd0e7")]).then(n.bind(null,"9991"))},v=function(){return n.e("chunk-2256d179").then(n.bind(null,"a1ca"))},b=function(){return n.e("chunk-61f998a6").then(n.bind(null,"90ab"))},_=function(){return Promise.all([n.e("chunk-6db2e062"),n.e("chunk-8aada2d8")]).then(n.bind(null,"a8f1"))},w=function(){return Promise.all([n.e("chunk-6db2e062"),n.e("chunk-7afb5c86")]).then(n.bind(null,"bb25"))};r["default"].use(d["a"]);var y=new d["a"]({mode:"history",routes:[{path:"/article/:id",name:"article",component:h},{path:"/comment/:id",name:"comment",component:p},{path:"/jssdk",name:"jssdk",component:v},{path:"/message/:sid?/:id?",name:"message",component:f},{path:"/group/:id",name:"group",component:b},{path:"/community/:id",name:"community",component:m},{path:"/draft/:id",name:"draft",component:_},{path:"/video/:id",name:"video",component:w},{path:"/image/:id",name:"image",component:g}]});y.beforeEach(function(e,t,n){var r=e.meta,o=e.path,a=e.query,i=(e.name,e.params,o.split("/").slice(1)),s=a.type,c=a.category;switch(document.title=r.title?r.title:"贴近",console.log(i[0]),i[0]){case"feed":"2"==s?"3"==c?y.replace({path:o.replace("feed","comment")}):"1"==c||"2"==c?y.replace({path:o.replace("feed","draft"),query:a}):y.replace({path:o.replace("feed","article")}):"1"==s?y.replace({path:o.replace("feed","video")}):"0"==s?y.replace({path:o.replace("feed","image")}):n();break;default:n();break}});var x=y,k=n("c0d6"),S=n("bc3a"),A=n.n(S),T=n("f121"),O=A.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).BASE_API,timeout:15e3,withCredentials:!0});O.interceptors.request.use(function(e){var t=T["a"].server+e.url;return e.url=t,ENV.app?ENV.app&&ENV.ios?e.headers["Closer-Agent"]="Closer-Ios":ENV.app&&ENV.android&&(e.headers["Closer-Agent"]="Closer-Android"):e.headers["Closer-Agent"]="Closer-H5",Cookies.get("uid")&&(e.headers["X-Udid"]=Cookies.get("uid")),Cookies.get("aid")&&(e.headers["X-Adid"]=Cookies.get("aid")),(Cookies.get("token")&&-1==e.url.indexOf("auth")&&-1==e.url.indexOf("account")||Cookies.get("token")&&-1!=e.url.indexOf("closer_account.bind_phone"))&&(e.headers.Authorization=Cookies.get("token")),console.log(e.url),e},function(e){return Promise.reject(e).catch(e)}),O.interceptors.response.use(function(e){return e},function(e){var t=n("07f7").default;if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录",router.push({name:"worldcupIndex"});break;case 403:e.message="拒绝访问",router.push({name:"worldcupIndex"});break;case 404:e.message="请求地址出错: ".concat(e.response.config.url);break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:}else e.message="网络错误，请稍后再试！";return e&&e.response&&e.response.data&&e.response.data.message?console.warn(e.response.data.message):console.warn(e.message),t.reject(e).catch(e)});var E=O,j=n("a78e"),C=n.n(j),R=n("3a34"),I=n.n(R),N=n("c6c6"),U=n.n(N),V=n("18a0"),L=n.n(V),P=n("283e"),G=n.n(P),M=(n("1c4c"),n("8afe")),D=n("c93e"),B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{class:!1,on:{"before-enter":e.beforeEnter,enter:e.enter,leave:e.leave}},[e.display?n("section",{staticClass:"preview",on:{click:e.handleClick}},[e.showCount?n("div",{staticClass:"count"},[e._v(e._s(e.currentIndex+1)+"/"+e._s(e.list.length))]):e._e(),n("div",{staticClass:"name"}),n("div",{ref:"con",staticClass:"container",style:e.aniStyle},[n("mt-swipe",{attrs:{auto:0,"show-indicators":!1,speed:100,defaultIndex:e.currentIndex},on:{change:e.handleChange}},e._l(e.list,function(t,r){return n("mt-swipe-item",{key:r},[n("div",{staticClass:"item"},[e.imgUrls[r]?n("img",{staticClass:"img",attrs:{src:e.imgUrls[r]}}):n("img",{staticClass:"loading",attrs:{src:e.imgError[r]||e.loadingImg}})])])}))],1)]):e._e()])},J=[],W=(n("20d6"),n("76a0")),F=n("12ae"),$=n.n(F),q=n("fa93"),H=n.n(q),X={name:"preview",components:{Swipe:W["Swipe"],SwipeItem:W["SwipeItem"]},props:{display:{type:Boolean,default:!1},current:Object,list:{type:Array,default:function(){return[]}}},data:function(){return{img:null,currentIndex:0,showCount:!1,imgUrls:[],imgError:[],ww:window.innerWidth,wh:window.innerHeight,aniStyle:{},loadingImg:$.a}},watch:{display:function(e){if(e){var t=this.findIndex(this.current,this.list);this.showCurrentImg(t),this.showCount=this.list.length>1}}},methods:{beforeEnter:function(e){var t=this.getTranslate();e.style.opacity=0,this.$refs.con.style.transform="translate(".concat(t.dx,"px, ").concat(t.dy,"px) scale(").concat(t.rate,")")},enter:function(e){var t=this;setTimeout(function(){e.style.opacity=1,t.$refs.con.style.transform="translate(0, 0) scale(1)"},0)},leave:function(e){var t=this.getTranslate();e.style.opacity=0,this.$refs.con.style.transform="translate(".concat(t.dx,"px, ").concat(t.dy,"px) scale(").concat(t.rate,")")},getSrc:function(e){return e.dataset["src"]||e.src},getTranslate:function(){var e=this.list[this.currentIndex],t=e.getBoundingClientRect();return{rate:t.width/this.ww,dx:t.left+(t.width-this.ww)/2,dy:t.top+(t.height-this.wh)/2}},findIndex:function(e,t){return t.indexOf(e)},handleClick:function(){this.display=!1},handleChange:function(e){this.showCurrentImg(e)},showCurrentImg:function(e){this.currentIndex=e,this.img.dataset["i"]=e,this.img.src=this.getSrc(this.list[e])},loadImg:function(e){var t=this.img.dataset["i"],n=this.img.src;t&&(e?this.$set(this.imgUrls,t,n):this.$set(this.imgError,t,H.a))}},mounted:function(){this.img=new Image,this.img.onload=this.loadImg.bind(this,!0),this.img.onerror=this.loadImg.bind(this,!1)}},K=X,z=(n("3ff4"),Object(c["a"])(K,B,J,!1,null,"715a1346",null));z.options.__file="preview.vue";var Q,Z=z.exports,Y={},ee=document.body,te=[],ne=[];function re(e){e&&e.addEventListener("click",function(e){var t=e.target;"img"==t.tagName.toLowerCase()&&"preview"==t.dataset.type&&(console.log("touch"),ae(t))})}function oe(e){var t=e.src,n=e.dataset["src"];return/^https?:\/\//.test(t)?t:/^https?:\/\//.test(n)?n:null}function ae(e){Y.isApp?ie(e):se(e)}function ie(e){var t=ne.indexOf(oe(e)),n={imgs:ne,index:t};Y.isIos?window.WebViewJavascriptBridge&&setupWebViewJavascriptBridge(function(e){e.callHandler("tapImage",n)}):"undefined"!=typeof window.bridge&&window.bridge.tapImage(JSON.stringify(n))}function se(e){Y.isApp||(Q.current=e,Q.display=!0)}var ce={install:function(e,t){if(Y=Object(D["a"])({},t),console.log("preview:install"),!Q&&!Y.isApp){var n=e.extend(Z);Q=new n({el:document.createElement("div")}),document.body.appendChild(Q.$el),Q.list=te}var r={init:function(e){ee=document.querySelector(e)||ee,re(ee),te.push.apply(te,Object(M["a"])(Array.from(ee.querySelectorAll("img")).filter(function(e){var t=oe(e),n=e.dataset.type;return!(!t||"preview"!=n)&&(ne.push(t),!0)}))),console.log("preview imgs.length",te.length,ne.length)}};e.$preview||(e.$preview=r),e.prototype.$preview=e.$preview}},ue=(n("ac6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"player"},[n("video",{ref:"video",staticClass:"player-video",attrs:{controlsList:"nodownload",width:"100%",height:"100%",src:e.src,poster:e.poster,preload:e.preload,autoPlay:e.autoPlay,playsinline:"true","webkit-playsinline":"true"},domProps:{muted:e.muted},on:{loadstart:e.handleLoadStart,waiting:e.handleWaiting,canplay:e.handleCanPlay,canplaythrough:e.handleCanPlayThrough,playing:e.handlePlaying,ended:e.handleEnded,seeking:e.handleSeeking,seeked:e.handleSeeked,play:e.handlePlay,pause:e.handlePause,progress:e.handleProgress,durationchange:e.handleDurationChange,error:e.handleError,suspend:e.handleSuspend,abort:e.handleAbort,emptied:e.handleEmptied,stalled:e.handleStalled,loadedmetadata:e.handleLoadedMetaData,loadeddata:e.handleLoadedData,timeupdate:e.handleTimeUpdate,ratechange:e.handleRateChange,volumechange:e.handleVolumeChange}},[e._v("\n    "+e._s(e.children)+"\n  ")]),n("div",{staticClass:"player-controls",on:{click:e.handleControlsClick}},[e.controlsDisplay?n("transition",{attrs:{name:"fade-out"}},[n("div",{staticClass:"controls-main"},[n("div",{staticClass:"controls-top"},[n("div",{staticClass:"keys"})]),n("div",{staticClass:"controls-center"},[e.playing?n("div",{staticClass:"icon-pause",on:{click:e.togglePlay}}):n("div",{staticClass:"icon-play",on:{click:e.togglePlay}})]),n("div",{staticClass:"controls-bottom"},[n("div",{staticClass:"current"},[n("div",{staticClass:"current-time"},[e._v(e._s(e.secondsFormat(e.currentTime)))])]),n("div",{staticClass:"process"},[n("div",{staticClass:"process-total"}),n("div",{staticClass:"process-buffered",style:{width:e.processBuffered}}),n("div",{staticClass:"process-current",style:{width:e.processCurrent}}),n("div",{staticClass:"process-dot",style:{marginLeft:e.processCurrent}})]),n("div",{staticClass:"total"},[n("div",{staticClass:"total-time"},[e._v(e._s(e.secondsFormat(e.duration)))])]),n("div",{staticClass:"keys"},[n("div",{staticClass:"key-fullscreen",on:{click:e.handleFullScreen}})])])])]):n("div",{staticClass:"controls-sub"},[n("div",{staticClass:"process-buffered",style:{width:e.processBuffered}}),n("div",{staticClass:"process-current",style:{width:e.processCurrent}})])],1)])}),le=[],de=n("ed08"),pe={name:"player",props:{video:{type:Object,default:function(){}},params:{type:Object,default:function(){}}},data:function(){return{src:"",poster:"",width:0,heihgt:0,muted:!1,preload:!1,autoPlay:!1,loop:!1,children:"",loading:!1,playing:!1,played:!1,controlsDisplay:!0,currentTime:0,duration:0,buffered:0,controlsTimer:null}},computed:{processBuffered:function(){return 100*this.buffered/this.duration+"%"},processCurrent:function(){return 100*this.currentTime/this.duration+"%"}},watch:{video:function(e){e&&(this.src=e.src,this.poster=e.poster,this.children=e.children||e.childNodes,e.dataset["duration"]&&(this.duration=e.dataset["duration"]/1e3),e.width&&(this.width=e.width),e.height&&(this.height=e.height),console.log("video1.duration",e.dataset["duration"]))},params:function(e){e&&(this.muted=e.muted,this.preload=!0,this.autoPlay=!1,this.loop=e.loop)}},methods:{handleLoadStart:function(){console.log("Video:handleLoadStart")},handleWaiting:function(){console.log("Video:handleWaiting"),this.loading=!0},handleCanPlay:function(){console.log("Video:handleCanPlay"),this.loading=!1},handleCanPlayThrough:function(){console.log("Video:handleCanPlayThrough")},handlePlaying:function(){console.log("Video:handlePlaying")},handleEnded:function(){console.log("Video:handleEnded"),this.showControls(),clearTimeout(this.controlsTimer)},handleSeeking:function(){console.log("Video:handleSeeking")},handleSeeked:function(){console.log("Video:handleSeeked")},handlePlay:function(){console.log("Video:handlePlay"),this.hasPlay=!0,this.playing=!0,this.hideControls(500)},handlePause:function(){console.log("Video:handlePause"),this.loading=!1,this.playing=!1,this.showControls(),clearTimeout(this.controlsTimer)},handleProgress:function(){console.log("Video:handleProgress")},handleDurationChange:function(){console.log("Video:handleDurationChange")},handleError:function(){console.log("Video:handleError")},handleSuspend:function(){console.log("Video:handleSuspend")},handleAbort:function(){console.log("Video:handleAbort")},handleEmptied:function(){console.log("Video:handleEmptied")},handleStalled:function(){console.log("Video:handleStalled")},handleLoadedMetaData:function(){console.log("Video:handleLoadedMetaData");var e=this.$refs.video,t=e.currentTime,n=e.duration;this.currentTime=t,n&&(this.duration=n)},handleLoadedData:function(){console.log("Video:handleLoadedData")},handleTimeUpdate:function(){console.log("Video:handleTimeUpdate");var e=this.$refs.video,t=e.buffered,n=e.currentTime,r=e.duration;this.currentTime=n,r&&(this.duration=r),t.length>0&&(this.buffered=t.end(t.length-1))},handleRateChange:function(){console.log("Video:handleRateChange")},handleVolumeChange:function(){console.log("Video:handleVolumeChange")},togglePlay:function(){console.log("Video:togglePlay");var e=this.$refs.video;this.$refs.video.paused?e.play():e.pause()},toggleMute:function(e){console.log("Video:toggleMute"),this.muted?this.$refs.video.muted=!1:this.$refs.video.muted=!0,this.muted=!this.muted},handleControlsClick:function(e){console.log("Video:handleControlsClick"),this.controlsDisplay?this.playing&&(clearTimeout(this.controlsTimer),this.hideControls()):(this.showControls(),this.hideControls())},handleFullScreen:function(e){console.log("Video:handleFullScreen");var t=this.$refs.video,n=t.webkitEnterFullscreen||t.webkitRequestFullScreen;n&&n.call(t)},secondsFormat:function(e){return Object(de["j"])(e)},showControls:function(){this.controlsDisplay=!0},hideControls:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;this.controlsTimer=setTimeout(function(){e.controlsDisplay=!1},t)}},mounted:function(){}},he=pe,fe=(n("54a9"),Object(c["a"])(he,ue,le,!1,null,"b67c27f2",null));fe.options.__file="player.vue";var me=fe.exports;function ge(e){return new e({el:document.createElement("div")})}var ve={install:function(e,t){console.log("player:install");var n=e.extend(me),r={init:function(e,t){var r=document.querySelector(e)||r,o=r.querySelectorAll("video");o.forEach(function(e){var r=e.parentNode,o=ge(n);r.replaceChild(o.$el,e),o.video=e,o.params=t})}};e.$video||(e.$player=r),e.prototype.$player=e.$player}},be=(n("4917"),navigator.userAgent.toLowerCase()||navigator.userAgent.toLowerCase()),_e=location.href,we={},ye=T["a"].href;function xe(){for(var e in ye){var t=new(URL||webkitURL)(ye[e]).hostname,n=_e.indexOf(t);n>-1&&n<=8&&(we.env=e)}we.env||console.error("ENV.env不可为空，请确保当前测试页面的location.origin是~/src/config/index.js配置的href值之一!"),we.ua=be,we.app=/closer-(android|ios)/.test(be),we.wx=/micromessenger/.test(be),we.ios=/((iphone\sos)\s([\d_]+))|(-ios)/.test(be),we.android=/((android);?[\s\/]+([\d.]+)?)|(-android)/.test(be),we.version=be.match(/closerapp\/version\/([0-9.]+)/)||"0",we.weibo=/weibo/.test(be),we.qq=/qq/.test(be),we.safari=/version\/([\d.]+)([^S](safari)|[^M]*(mobile)[^S]*(safari))/.test(be),we.chrome=/chrome\/([\d.]+)/.test(be)||/crios\/([\d.]+)/.test(be),we.firefox=/firefox\/([\d.]+)/.test(be),we.ie=/msie\s([\d.]+)/.test(be)||/trident\/[\d](?=[^\?]+).*rv:([0-9.].)/.test(be),we.dev="build"!=we.env;var r=be.match(/closerapp\/version\/([0-9.]+)/);return we.version=r?r[1]:"",we.v120=Se("1.2.0"),console.log("当前环境变量window.ENV:",we),ke(),we}function ke(){var e=function(e){var t=T["a"][e];Object.defineProperty(T["a"],e,{get:function(){return t[we.env]||""}})};for(var t in T["a"])e(t)}function Se(e,t){var n=we.version,r=!t||we.android?e:t;if(n&&r){n=n.split("."),r=r.split(".");for(var o=Math.max(n.length,r.length),a=0;a<o;a++){var i=parseInt(n[a]||0),s=parseInt(r[a]||0);if(i>=s)return!0}}return!1}var Ae=xe();if(Ae.dev)new I.a;function Te(){}function Oe(){var e=Math.min(screen.width,document.documentElement.getBoundingClientRect().width)/375*16;document.documentElement.style.fontSize=(e>=32?32:e)+"px"}function Ee(){k["a"].dispatch("get_adcookie",{webUdid:!0}).then(function(){})}r["default"].prototype.ENV=window.ENV=Ae,window.wx=L.a,window.Axios=E,window.Cookies=C.a,window.MobileDetect=U.a,window.setupWebViewJavascriptBridge=function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)},r["default"].use(G.a,{preload:1.3,error:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAGmAQMAAAAZMJMVAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAADUExURefn5ySG6Q8AAAA+SURBVHja7cExAQAAAMKg9U9tCj+gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAvwGcmgABBZ8R+wAAAABJRU5ErkJggg==",loading:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAGmAQMAAAAZMJMVAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAADUExURefn5ySG6Q8AAAA+SURBVHja7cExAQAAAMKg9U9tCj+gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAvwGcmgABBZ8R+wAAAABJRU5ErkJggg==",attempt:1}),r["default"].use(ce,{isApp:Ae.app,isIos:Ae.ios}),r["default"].use(ve),document.onreadystatechange=function(){if("complete"===document.readyState){Te();try{window.WebViewJavascriptBridge&&window.webkit.messageHandlers.canShowContent.postMessage(null),"undefined"!=typeof window.bridge&&window.bridge.canShowContent(null)}catch(e){}}},Oe(),window.onresize=Oe,Ee(),new r["default"]({store:k["a"],router:x,render:function(e){return e(l)}}).$mount("#app")},"5a5d":function(e,t,n){},6423:function(e,t,n){},6573:function(e,t,n){},c0d6:function(e,t,n){"use strict";n("b54a"),n("7f7f"),n("96cf");var r,o,a=n("3040"),i=n("6bde"),s=(n("a481"),n("3b2b"),n("4917"),n("a322")),c=(n("cadf"),n("551c"),n("097d"),n("2b0e")),u=n("2f62"),l=n("76a0"),d=n("ed08"),p=n("f121"),h={admin:{get_auth_path:"closer_auth.get_auth_path",login_with_wechat:"closer_auth.login_with_wechat",closeruser_regist:"closer_auth.closeruser_regist",get_code_by_phone:"closer_account.get_code_by_phone_v2",check:"closer_account.check",check_wechat:"closer_account.check_wechat",info:"closer_user.info",user_show:"closer_user.show",bind_phone:"closer_account.bind_phone",like:"closer_reply.like",add_reply:"closer_reply.add_reply",invite_counts:"closer_user.invite_counts",wechat_config:"closer_share.wechat_config"},command:{show:"closer_subject.show",incr_view:"closer_subject.incr_view",comments:"closer_reply.comments",videos:"ali_vod.accessInfo",report:"closer_report.add",like:"closer_reply.like",add_reply:"closer_reply.add_reply",replys:"closer_reply.replys",reportType:"closer_report.get_report_types",hot_subjects:"closer_subject.hot_subjects",collectionsV2:"closer_subject.collectionsV2"},community:{show:"closer_community.show",community_subject_list_index:"closer_subject.community_subject_list_index",subscription:"closer_community.subscription"},group:{show:"closer_class.show",recruiting:"closer_class.recruiting",group_subject_list:"closer_subject.class_subject_list_index",share_group:"closer_share.outer_group",join:"closer_classuser.join",apply_join:"closer_classuser.apply_join"},activity:(r={get_activity:"closer_activity.get_activity",add_channel:"activity_worldcup.add_channel",check_guess_result:"activity_worldcup.check_guess_result",get_match_list:"activity_worldcup.get_match_list",get_user_guess_list:"activity_worldcup.get_user_guess_list",get_user_guess_statistic:"activity_worldcup.get_user_guess_statistic",guess_match:"activity_worldcup.guess_match",receive_chance:"activity_worldcup.receive_chance"},Object(s["a"])(r,"check_guess_result","activity_worldcup.check_guess_result"),Object(s["a"])(r,"activity_water_chance","activity_water.chance"),Object(s["a"])(r,"activity_water_update","activity_water.update"),Object(s["a"])(r,"activity_water_join","activity_water.join"),Object(s["a"])(r,"get_invite_statistic","closer_invite.get_statistic"),Object(s["a"])(r,"get_invitee_page_list","closer_invite.get_invitee_page_list"),Object(s["a"])(r,"get_yesterday_award_amt","closer_invite.get_yesterday_award_amt"),Object(s["a"])(r,"remind_login","closer_invite.remind_login"),r),statitics:{view_count:"closer_promotion_activity.view_count",get_adcookie:"closer_statistics.get_adcookie"},share:{wechat_config:"closer_share.wechat_config",get_adcookie:"closer_statistics.get_adcookie",common:"closer_statistics.user_action_v2"}},f=(o={get_adcookie:function(e){return Axios.post(h.share.get_adcookie,e).then(function(e){return e.data})},common:function(e){return Axios.post(h.share.common,e).then(function(e){return e.data})},getCommunityShow:function(e){return Axios.post(h.community.show,e)},subscription:function(e){return Axios.post(h.community.subscription,e).then(function(e){return e.data})},incr_view:function(e){return Axios.post(h.command.incr_view,e).then(function(e){return e.data})},get_hot_subjects:function(e){return Axios.post(h.command.hot_subjects,e).then(function(e){return e.data})},get_community_subjects:function(e){return Axios.post(h.community.community_subject_list_index,e).then(function(e){return e.data})},getCode:function(e){return Axios.post(h.admin.get_code_by_phone,e)},Login:function(e){return Axios.post(h.admin.closeruser_regist,e)},getAuthPath:function(e){return Axios.post(h.admin.get_auth_path,e)},loginWithWechat:function(e){return Axios.post(h.admin.login_with_wechat,e)},getComments:function(e){return Axios.post(h.command.comments,e)},isLike:function(e){return Axios.post(h.command.like,e)},wechatConfig:function(e){return Axios.post(h.admin.wechat_config,e)}},Object(s["a"])(o,"wechatConfig",function(e){return Axios.post(h.admin.wechat_config,e)}),Object(s["a"])(o,"getCollections",function(e){return Axios.post("".concat(h.command.collectionsV2),e).then(function(e){return e.data})}),o),m=(n("a78e"),!0),g={h5Cookies:"",incr_view:0,hotSubjects:[],visible:!1,smsCode:"",isLogin:!1,user:{},authSuccess:!1,messagelist:{data:[]},hotColletions0:null,hotColletions1:null},v={getFocusState:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,f.getCommunityShow({communityid:n});case 3:o=e.sent,a=o.data,0===a.code&&a.result.isFollowed&&r("SET_FOCUS_STAT",a.result.isFollowed,{root:!0});case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),get_focus_stat:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,o=n.payload,a=n.after,this,e.prev=3,e.next=6,f.subscription(o);case 6:if(i=e.sent,s=i.data,console.log("focus:",s),0!==s.code){e.next=18;break}if(0!=o.flag){e.next=14;break}r("SET_FOCUS_STAT",!1,{root:!0}),e.next=16;break;case 14:return r("SET_FOCUS_STAT",!0,{root:!0}),e.abrupt("return",!0);case 16:e.next=19;break;case 18:Object(l["Toast"])({message:s.result,position:"top"});case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](3),Object(l["Toast"])({message:e.t0,position:"top"});case 24:a&&a();case 25:case"end":return e.stop()}},e,this,[[3,21]])}));return function(t,n){return e.apply(this,arguments)}}(),get_incr_view:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,this,e.prev=2,e.next=5,f.incr_view(n);case 5:o=e.sent,console.log(o),0===o.code&&r("SET_INCR_VIEW",o.result),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[2,10]])}));return function(t,n){return e.apply(this,arguments)}}(),getHotSubjects:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,f.get_hot_subjects(n);case 4:o=e.sent,0===o.code&&(o.result.data.map(function(e){return e.content&&(e.content=JSON.parse(e.content)),e}),o.result.data&&r("SET_HOT_SUBJECTS",o.result.data)),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}(),getCommunitySubjects:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,f.get_community_subjects(n);case 4:o=e.sent,0===o.code&&(o.result.data.map(function(e){return e.content&&(e.content=JSON.parse(e.content)),e}),o.result.data&&r("SET_HOT_SUBJECTS",o.result.data)),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}(),getWxAuth:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,t.state,r=n.payload,o=n.before,console.log("getWxAuth",r),a={path:p["a"].wxAuthorization+encodeURIComponent(p["a"].href+Object(d["a"])(r.path,r.query))},o&&o(),e.next=7,f.getAuthPath(a).catch(function(e){Object(l["Toast"])("网络开小差啦~")});case 7:s=e.sent,console.log(s.data.result),Object(i["a"])(void 0!=s.data.code)&&0==s.data.code?location.href=s.data.result:s.result&&Object(l["Toast"])(s.result);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getUserInfoWithWx:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,t.state,console.log(n),o=Cookies.get("user"),a=Cookies.get("token"),!o||!a){e.next=10;break}return console.log("user-from-cookie:",JSON.parse(o)),r("SET_USER",JSON.parse(o)),e.abrupt("return",!0);case 10:return e.next=12,f.loginWithWechat(n).catch(function(e){Object(l["Toast"])("网络开小差啦~")});case 12:if(s=e.sent,c=s.data,console.log("data:",c),!Object(i["a"])(void 0!=c.code)||0!=c.code){e.next=27;break}return o=c.result.user,a=c.result.token,console.log("user-from-server:",o),r("SET_USER",o),console.log("token",a),console.log("user",o),Cookies.set("token",a,{expires:7}),Cookies.set("user",o,{expires:7}),e.abrupt("return",!0);case 27:return c.result&&Object(l["Toast"])(c.result),e.abrupt("return",!1);case 29:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getCode:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,l["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),e.next=4,f.getCode(n).catch(function(e){l["Indicator"].close(),Object(l["Toast"])("网络开小差啦~")});case 4:o=e.sent,a=o.data,l["Indicator"].close(),void 0!=Object(i["a"])(a.code)&&0==a.code?r({type:"getSmsCode",data:a}):a.result&&Object(l["Toast"])(a.result);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),login:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.rootState,t.state,r=t.commit,console.log("login, payload ",n),o=/^(0|86|17951)?(1[23456789][0-9])[0-9]{8}$/,!n.phone||o.test(n.phone)){e.next=6;break}return Object(l["Toast"])("请输入正确的手机号"),e.abrupt("return");case 6:if(0!=n.token.length){e.next=9;break}return Object(l["Toast"])("请输入验证码"),e.abrupt("return");case 9:return Cookies.get("uid")&&(n["udid"]=Cookies.get("uid")),Cookies.get("aid")&&(n["adid"]=Cookies.get("aid")),n["protocol"]="WEB_SOCKET",l["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),e.next=15,f.Login(n).catch(function(e){l["Indicator"].close(),Object(l["Toast"])("网络开小差啦~")});case 15:if(a=e.sent,s=a.data,l["Indicator"].close(),void 0==Object(i["a"])(s.code)||0!=s.code){e.next=28;break}if(!s.result||!s.result.token){e.next=25;break}if(Cookies.set("token",s.result.token,{expires:60}),!s.result.user){e.next=25;break}if(Cookies.set("user",JSON.stringify(s.result.user),{expires:60}),!n.push){e.next=25;break}return e.abrupt("return",s.result.user);case 25:r({type:"hide"}),e.next=31;break;case 28:return Object(l["Toast"])("网络开小差啦，请稍后再试"),l["Indicator"].close(),e.abrupt("return");case 31:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getCommentsList:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,console.log("getCommentsList--",n),e.next=4,f.getComments(n).catch(function(e){Object(l["Toast"])("网络开小差啦~")});case 4:o=e.sent,a=o.data,void 0!=Object(i["a"])(a.code)&&0==a.code&&r({type:"setCommentList",data:a});case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),checkIsLike:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.next=3,f.isLike(n).catch(function(e){Object(l["Toast"])("网络开小差啦~")});case 3:r=e.sent,Object(i["a"])(void 0!=r.code)&&0==r.code||r.result&&Object(l["Toast"])(r.result);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getHotCollections:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,"undefined"==typeof n.type){e.next=8;break}return e.next=4,f.getCollections(n).catch(function(e){Object(l["Toast"])("网络开小差啦~")});case 4:o=e.sent,a=o.result,s=o.code,void 0!=Object(i["a"])(s)&&0==s?0==parseInt(n.type)?r("SET_HOT_COLLECTIONS0",a.data):1==parseInt(n.type)&&r("SET_HOT_COLLECTIONS1",a.data):a&&Object(l["Toast"])(a);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},b={SET_H5COOKIES:function(e,t){e.h5Cookies=t},SET_INCR_VIEW:function(e,t){console.log("para:",t),e.incr_view=t},SET_HOT_SUBJECTS:function(e,t){console.log("SET_HOT_SUBJECTS",t),e.hotSubjects=t},SET_USER:function(e,t){e.user=t,e.isLogin=!0},setAuthStatus:function(e){e.authSuccess=!0},show:function(e){e.visible=!0},hide:function(e){e.visible=!1},getSmsCode:function(e,t){e.smsCode=t},setCommentList:function(e,t){e.messagelist=t.data.result.data},SET_HOT_COLLECTIONS1:function(e,t){e.hotColletions1=t},SET_HOT_COLLECTIONS0:function(e,t){e.hotColletions0=t}},_={namespaced:m,state:g,actions:v,mutations:b};function w(e){return y.apply(this,arguments)}function y(){return y=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Axios.post(h.command.show,t));case 1:case"end":return e.stop()}},e,this)})),y.apply(this,arguments)}var x={GET_APP_TOKEN:"",version_1_2:!1,res:{},content:{},exist:!0},k={fetch_content:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,a=n.id,e.prev=2,e.next=5,w({subjectid:a});case 5:if(i=e.sent,s=i.data,0==s.code){e.next=11;break}r("GET_EXIST_STATUS",!1),e.next=19;break;case 11:if(window.ENV.app){e.next=15;break}if(!(0===s.result.int_verify||-1===s.result.int_verify&&4!=s.result.int_category&&6!=s.result.int_category||s.result.bool_delete)){e.next=15;break}return r("GET_EXIST_STATUS",!1),e.abrupt("return");case 15:s.result.content&&(c=JSON.parse(s.result.content),o.CONTENT_IMGS,o.IMG_INDEX=0,2===s.result.int_type&&(u=Object(d["h"])(c.html),u&&(c.html=u)),r("SET_CONTENT",c),o.content=c),r("SET_RES",s.result),r("SET_FOCUS_STAT",s.result.isFollowed,{root:!0}),o.res=s.result;case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e["catch"](2),console.log("content.catch"),r("GET_EXIST_STATUS",!1),e.abrupt("return");case 26:case"end":return e.stop()}},e,this,[[2,21]])}));return function(t,n){return e.apply(this,arguments)}}()},S={GET_USER_AGENT:function(e,t){var n=t.nvg.toLowerCase(),r=t.ref,o=n.indexOf("closer-ios")>-1||n.indexOf("closer-android")>-1,a=o||r.indexOf("/invite")>-1;e.GET_MESSAGE_STATE=!a,e.GET_IS_APP=o,e.agent=n,e.isPre=r.indexOf("?view=pre")>-1},SET_CONTENT:function(e,t){e.content=t},SET_RES:function(e,t){e.res=t},GET_EXIST_STATUS:function(e,t){e.exist=t}},A={namespaced:!0,state:x,actions:k,mutations:S};function T(e){return O.apply(this,arguments)}function O(){return O=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.command.show,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),O.apply(this,arguments)}var E={namespaced:!0,state:{discuss:{},content:{},subject:{},subjectExist:!0},mutations:{setContent:function(e,t){e.content=t},setDiscuss:function(e,t){e.discuss=t},setSubject:function(e,t){e.subject=t},setSubjectState:function(e,t){e.subjectExist=t}},actions:{getSubject:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s,c,u,l,p,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,e.prev=1,e.next=4,T(n);case 4:if(a=e.sent,i=a.data,console.log("getSubject:",i),"undefined"==typeof i.code||0!=i.code){e.next=15;break}if(window.ENV.app){e.next=12;break}if(!(0===i.result.int_verify||-1===i.result.int_verify&&4!=i.result.int_category&&6!=i.result.int_category||i.result.bool_delete)){e.next=12;break}return r("setSubjectState",!1),e.abrupt("return");case 12:i.result.content&&(s=JSON.parse(i.result.content),2===i.result.int_type&&(c=Object(d["h"])(s.html),c&&(s.html=c),u=[],l=0,s.discuss&&(p=s.discuss.map(function(e){if(e.text){var t=/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g,n=e.text.match(t);n?(e.weblink=!0,n.map(function(n){var r='<a href="'.concat(n,'" target="_blank">').concat(n,"</a>"),o=e.text.replace(t,r);e.newText=o})):e.weblink=!1}return e.image&&(e.image["index"]=l,u.push(e.image.link),l++),e}),r("setDiscuss",p)),3===i.result.int_category&&s.end_html&&(h=Object(d["h"])(s.end_html),h&&(s.end_html=h)),o.CONTENT_IMGS=u,o.IMG_INDEX=l,r("setContent",s),delete i.result.content,o.res=i.result,r("setSubject",i.result))),e.next=16;break;case 15:r("setSubjectState",!1);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),console.error("getSubject ",e.t0),r("setSubjectState",!1);case 22:case"end":return e.stop()}},e,this,[[1,18]])}));return function(t,n){return e.apply(this,arguments)}}()}};function j(e){return C.apply(this,arguments)}function C(){return C=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.community.show,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),C.apply(this,arguments)}function R(e){return I.apply(this,arguments)}function I(){return I=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.community.community_subject_list_index,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),I.apply(this,arguments)}function N(e){return U.apply(this,arguments)}function U(){return U=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.community.subscription,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),U.apply(this,arguments)}function V(e){return L.apply(this,arguments)}function L(){return L=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.group.recruiting,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),L.apply(this,arguments)}var P={namespaced:!0,state:{communityShow:{},groupList:{},descResult:{},isFollow:!1,visible:!1},mutations:{setCommunityShow:function(e,t){console.log("payload",t);var n=t.data;e.communityShow=n.result,console.log("communityShow",e.communityShow)},getGroupList:function(e,t){console.log("payload",t);var n=t.data;e.groupList=n.result,console.log("groupList",e.groupList)},getDescResult:function(e,t){console.log("payload",t),e.descResult=t,console.log("descResult",e.descResult)},isFollow:function(e,t){console.log("payload",t),e.isFollow=t},show:function(e){e.visible=!0},hide:function(e){e.visible=!1}},actions:{getCommunityShow:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,a={communityid:n},e.next=4,j(a).catch(function(e){Object(l["Toast"])("网络开小差啦~")});case 4:s=e.sent,c=s.data,console.log("data--",c),Object(i["a"])(void 0!=c.code&&0==c.code)?(r({type:"setCommunityShow",data:c}),o.res=c.result):c.result&&Object(l["Toast"])(c.result);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getSubscription:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,t.rootState,e.next=3,N(n).catch(function(e){Object(l["Toast"])("网络开小差啦~")});case 3:o=e.sent,a=o.data,console.log("data",a),Object(i["a"])(void 0!=a.code)&&0==a.code?a&&(r("isFollow",!0),r("show"),r("SET_FOCUS_STAT","true",{root:!0})):(a.result,Object(l["Toast"])(a.result));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getGroupList:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,e.next=3,V(n).catch(function(e){Object(l["Toast"])("网络开小差啦~")});case 3:o=e.sent,a=o.data,Object(i["a"])(void 0!=a.code)&&0==a.code?r({type:"getGroupList",data:a}):a.result&&Object(l["Toast"])(a.result);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}};function G(e){return M.apply(this,arguments)}function M(){return M=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.command.add_reply,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),M.apply(this,arguments)}function D(e){return B.apply(this,arguments)}function B(){return B=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.statitics.get_adcookie,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),B.apply(this,arguments)}var J={namespaced:!0,state:{visible:!1,replyData:{}},mutations:{show:function(e){e.visible=!0},hide:function(e){e.visible=!1},updateData:function(e,t){console.log(1,t),e.replyData=t}},actions:{addReplyData:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,o=t.state,r({type:"hide"}),l["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),e.next=5,G(n).catch(function(e){l["Indicator"].close(),Object(l["Toast"])("网络开小差啦~")});case 5:a=e.sent,s=a.data,l["Indicator"].close(),void 0!=Object(i["a"])(s.code)&&0==s.code?(r({type:"updateData",data:s}),r({type:"show"}),console.log("state.show:",o.visible)):s.result&&Object(l["Toast"])(s.result);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getAdCookie:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.rootState,e.next=3,D(n).catch(function(e){Object(l["Toast"])("网络开小差啦~")});case 3:if(r=e.sent,o=r.data,void 0==Object(i["a"])(o.code)||0!=o.code){e.next=11;break}return console.log(1,o),o.result&&(a=o.result,a.udid&&Cookies.set("uid",a.udid,{expires:30})),e.abrupt("return",null);case 11:o.result&&Object(l["Toast"])(o.result);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}};function W(e){return F.apply(this,arguments)}function F(){return F=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.group.share_group,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),F.apply(this,arguments)}function $(e){return q.apply(this,arguments)}function q(){return q=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.group.group_subject_list,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),q.apply(this,arguments)}function H(e){return X.apply(this,arguments)}function X(){return X=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.group.join,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),X.apply(this,arguments)}function K(e){return z.apply(this,arguments)}function z(){return z=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Axios.post(h.admin.send_message,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),z.apply(this,arguments)}var Q={namespaced:!0,state:{group:{},groupFeedList:[],groupFeedTitle:""},mutations:{SET_GROUP_INFO:function(e,t){console.log("set group",t),e.group=t},SET_GROUP_LIST:function(e,t){console.log("set group list",t),e.groupFeedList=t},SET_GROUP_FEED_TITLE:function(e,t){console.log("set group title",t),e.groupFeedTitle=t}},actions:{getGroupInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,t.rootState,e.prev=1,e.next=4,W(n);case 4:o=e.sent,a=o.data,console.log("code",a),0===a.code&&a.result&&r("SET_GROUP_INFO",a.result),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.error("getGroupInfo",e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t,n){return e.apply(this,arguments)}}(),getGroupList:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,o=t.state,t.rootState,a=t.dispatch,e.prev=1,e.next=4,$(n);case 4:if(i=e.sent,s=i.data,0!==s.code){e.next=11;break}return e.next=9,s.result.data.map(function(e){return e.content=JSON.parse(e.content),e});case 9:c=e.sent,c.length>0?(r("SET_GROUP_LIST",c),r("SET_GROUP_FEED_TITLE","群作品")):a("getCommunityList",{communityid:o.group.group_info.communityid});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),console.error("getGroupList",e.t0);case 16:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t,n){return e.apply(this,arguments)}}(),getCommunityList:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,t.rootState,console.log(n),e.prev=2,e.next=5,R(n);case 5:if(o=e.sent,a=o.data,console.log("getCommunityList",a),0!==a.code){e.next=14;break}return e.next=11,a.result.data.map(function(e){return e.content&&(e.content=JSON.parse(e.content)),e});case 11:i=e.sent,r("SET_GROUP_LIST",i),r("SET_GROUP_FEED_TITLE","热门文章");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](2),console.error("getGroupList",e.t0);case 19:case"end":return e.stop()}},e,this,[[2,16]])}));return function(t,n){return e.apply(this,arguments)}}(),joinGroup:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s,c,u,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.commit,r=t.state,t.rootState,o=n.classid,a=n.join_limit,this,console.log("join_limit:",a),0!=a){e.next=13;break}return i={classid:o},e.next=8,H(i);case 8:return s=e.sent,c=s.data,e.abrupt("return",0==c.code);case 13:if(1!=a){e.next=22;break}return i={id:o||r.group.group_info.id,type:"group",name:r.group.group_info.name||"",communityId:r.group.group_info.communityid||""},e.next=17,K(i);case 17:return u=e.sent,l=u.data,e.abrupt("return",0==l.code);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}};function Z(e){return Y.apply(this,arguments)}function Y(){return Y=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Axios.get("".concat(h.command.show,"?subjectid=").concat(t)).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)})),Y.apply(this,arguments)}var ee={GET_APP_TOKEN:"",version_1_2:!1,res:{},content:{},exist:!0},te={fetch_content:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,a=n.id,e.prev=2,e.next=5,Z(a);case 5:if(i=e.sent,0==i.code){e.next=10;break}r("GET_EXIST_STATUS",!1),e.next=17;break;case 10:if(window.ENV.app){e.next=14;break}if(!(0===i.result.int_verify||-1===i.result.int_verify&&4!=i.result.int_category&&6!=i.result.int_category||i.result.bool_delete)){e.next=14;break}return r("GET_EXIST_STATUS",!1),e.abrupt("return");case 14:i.result.content&&(s=JSON.parse(i.result.content),o.CONTENT_IMGS,o.IMG_INDEX=0,2===i.result.int_type&&(c=Object(d["h"])(s.html),c&&(s.html=c)),r("SET_CONTENT",s),o.content=s),r("SET_RES",i.result),o.res=i.result;case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e["catch"](2),console.log("content.catch"),r("GET_EXIST_STATUS",!1),e.abrupt("return");case 24:case"end":return e.stop()}},e,this,[[2,19]])}));return function(t,n){return e.apply(this,arguments)}}()},ne={SET_CONTENT:function(e,t){e.content=t},SET_RES:function(e,t){e.res=t},GET_EXIST_STATUS:function(e,t){e.exist=t}},re={namespaced:!0,state:ee,actions:te,mutations:ne};function oe(e){return ae.apply(this,arguments)}function ae(){return ae=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Axios.post(h.command.show,t));case 1:case"end":return e.stop()}},e,this)})),ae.apply(this,arguments)}var ie,se={res:{},content:{},exist:!0},ce={fetch_content:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=t.rootState,a=n.id,e.prev=2,e.next=5,oe({subjectid:a});case 5:if(i=e.sent,s=i.data,0==s.code){e.next=11;break}r("GET_EXIST_STATUS",!1),e.next=18;break;case 11:if(window.ENV.app){e.next=15;break}if(!(0===s.result.int_verify||-1===s.result.int_verify&&4!=s.result.int_category&&6!=s.result.int_category||s.result.bool_delete)){e.next=15;break}return r("GET_EXIST_STATUS",!1),e.abrupt("return");case 15:s.result.content&&(c=JSON.parse(s.result.content),o.CONTENT_IMGS,o.IMG_INDEX=0,console.log("content:",c),r("SET_CONTENT",c),o.content=c),r("SET_RES",s.result),o.res=s.result;case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e["catch"](2),console.log("content.catch"),r("GET_EXIST_STATUS",!1),e.abrupt("return");case 25:case"end":return e.stop()}},e,this,[[2,20]])}));return function(t,n){return e.apply(this,arguments)}}()},ue={GET_USER_AGENT:function(e,t){var n=t.nvg.toLowerCase(),r=t.ref,o=n.indexOf("closer-ios")>-1||n.indexOf("closer-android")>-1,a=o||r.indexOf("/invite")>-1;e.GET_MESSAGE_STATE=!a,e.GET_IS_APP=o,e.agent=n,e.isPre=r.indexOf("?view=pre")>-1},SET_CONTENT:function(e,t){e.content=t},SET_RES:function(e,t){e.res=t},GET_EXIST_STATUS:function(e,t){e.exist=t}},le={namespaced:!0,state:se,actions:ce,mutations:ue};c["default"].use(u["a"]);t["a"]=new u["a"].Store({state:(ie={UA:"",IS_APP:!1,IS_NEW_USER:!1,IS_DEV:!1,IMG_INDEX:0,CONTENT_IMGS:[],content:"",exist:!1,extension_text:"",alert_stat:!1,is_follow:!1,get_login_type:!1,visibleLogin:"",h5Cookies:"",isLogin:!1,user:{},h5Adid:""},Object(s["a"])(ie,"extension_text",""),Object(s["a"])(ie,"get_login_type",""),Object(s["a"])(ie,"visibleLogin",!1),Object(s["a"])(ie,"authSuccess",!1),Object(s["a"])(ie,"res",{}),Object(s["a"])(ie,"shareLink",""),Object(s["a"])(ie,"preShow",!1),Object(s["a"])(ie,"preImgs",[]),Object(s["a"])(ie,"preIndex",0),Object(s["a"])(ie,"wxConfig",{}),Object(s["a"])(ie,"shareConfig",{title:"贴近一点，看身边",desc:"能赚稿费的本地内容社区",link:"",imgUrl:""}),ie),mutations:{SET_CONTENT:function(e,t){e.content=t},GET_EXIST_STATUS:function(e,t){e.exist=t},SET_RES:function(e,t){e.res=t},SET_EXTENSION_TEXT:function(e,t){e.extension_text=t},SHOW_ALERT:function(e,t){e.alert_stat=t},SET_FOCUS_STAT:function(e,t){e.is_follow=t},GET_LOGIN_TYPE:function(e,t){e.get_login_type=t},SET_VISIBLE_LOGIN:function(e,t){e.visibleLogin=t},GET_VERSION:function(e){var t,n,r,o=navigator.userAgent.toLowerCase();if(o.indexOf("android")>-1||o.indexOf("adr")>-1||o.indexOf("linux")>-1){if(t="android",r="Android",o.match(new RegExp("android\\s(\\d+(?:\\.\\d*)+)"))){var a=o.match(new RegExp("android\\s(\\d+(?:\\.\\d*)+)"));n=a[1].replace(/\./g,"_")}}else if(o.indexOf("iphone")>-1||o.indexOf("ipad")>-1||o.indexOf("safari")>-1){if(t="ios",r="IOS",o.match(new RegExp("version/(\\d+(?:\\.\\d*)+)"))){var i=o.match(new RegExp("version/(\\d+(?:\\.\\d*)+)"));n=i[1].replace(/\./g,"_")}}else t="windows",r="Windows";e.nvgversion=n,e.nvgtype=t,e.nvgTypeToPowerCase=r},SET_H5COOKIES:function(e,t){console.log("h5",t),e.h5Cookies=t},SET_ENTER_TIME:function(e,t){e.enter_time=t},SET_USER:function(e,t){e.user=t,e.isLogin=!0},setAuthStatus:function(e){e.authSuccess=!0},SET_WX_CONFIG:function(e,t){e.wxConfig=t}},modules:{common:_,article:A,comment:E,community:P,message:J,group:Q,draft:re,video:le},actions:{getWxAuth:function(e,t){var n=e.commit,r=e.state;console.log("getWxAuth");var o={path:p["a"].wxAuthorization+encodeURIComponent(p["a"].href+t)};return f.getAuthPath(o).then(function(e){var t=e.data;console.log(t.result),Object(i["a"])(void 0!=t.code)&&0==t.code?(location.href=t.result,n("setAuthStatus"),console.log("state.authSuccess---",r.authSuccess)):t.result&&Object(l["Toast"])(t.result)}).catch(function(e){Object(l["Toast"])("网络开小差啦~")})},getUserInfoWithWx:function(e,t){var n=e.commit;e.state;console.log(t);var r=Cookies.get("user"),o=Cookies.get("token");return r&&o?(console.log("user-from-cookie:",JSON.parse(r)),n("SET_USER",JSON.parse(r)),!0):f.loginWithWechat(t).then(function(e){var t=e.data;return console.log("data:",t),Object(i["a"])(void 0!=t.code)&&0==t.code?(r=t.result.user,o=t.result.token,console.log("user-from-server:",r),n("SET_USER",r),console.log("token",o),console.log("user",r),Cookies.set("token",o,{expires:7}),Cookies.set("user",r,{expires:7}),r):(t.result&&Object(l["Toast"])(t.result),!1)}).catch(function(e){Object(l["Toast"])("网络开小差啦~")})},get_adcookie:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,o=n.webUdid,this,e.prev=3,a={webUdid:o},e.next=7,f.get_adcookie(a);case 7:if(i=e.sent,0!==i.code){e.next=11;break}return r("SET_H5COOKIES",i.result.udid),e.abrupt("return",i.result.udid);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),console.log("e==",e.t0);case 16:case"end":return e.stop()}},e,this,[[3,13]])}));return function(t,n){return e.apply(this,arguments)}}(),down_adcookies:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.state,n=t.rootState,t.commit,this,r={webUdid:!1,deviceType:n.nvgtype||"ios",deviceVersion:n.nvgversion||"11_0_0",adid:Cookies.get("h5Adid")||"closer-t1"},e.next=4,f.get_adcookie(r);case 4:return e.sent,e.abrupt("return",!0);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),down_statistics:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,t.commit,o=n.p1,a=Cookies.get("user")?JSON.parse(Cookies.get("user")).objectID:r.auth?r.auth.objectID:null,i=r.h5Cookies?r.h5Cookies:null,this,s={userId:a,deviceId:null,cookie:i,platform:"H5",attachPlatform:r.nvgTypeToPowerCase||null,communityId:r.res.communityid||null,title:r.res.title||null,dreason:null,time:Date.now(),cost:Date.now()-r.enter_time||0,totalTime:r.duration_time||0},e.next=7,Object(d["i"])(o,s);case 7:return c=e.sent,e.next=10,f.common(c);case 10:if(u=e.sent,0!==u.code){e.next=13;break}return e.abrupt("return",!0);case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),wx_config:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s,c,u,p,h,m,g,v,b,_,w,y,x,k;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,o=t.commit,!ENV.wx){e.next=21;break}return console.log("wx_config"),a={url:location.href},e.next=6,f.wechatConfig(a).catch(function(e){Object(l["Toast"])("网络开小差啦，请稍后再试")});case 6:if(i=e.sent,s=i.data,"undefined"==typeof s.code||0!=s.code){e.next=19;break}if(o("SET_WX_CONFIG",s.result),c=s.result,"{}"!=JSON.stringify(r.res)||"{}"!=JSON.stringify(r.group.group)){e.next=15;break}return console.info("not index"),Cookies.get("shareConfig")&&Object(d["l"])(c,JSON.parse(Cookies.get("shareConfig"))),e.abrupt("return");case 15:if(location.href.indexOf("/community")>-1)u=r.res.name?r.res.name:"栏目主页",h=r.res.description?r.res.description:"贴近一点 看身边",p=r.res.slogo?r.res.slogo:r.res.blogo;else if(location.href.indexOf("/group")>-1){if(console.log("state.res",JSON.stringify(r.group.group)),r.group.group&&r.group.group.group_info.group){if(g=r.group.group.group_info.group,u=g.name?g.name:"贴近群组",g.description)try{v=JSON.parse(r.group.group.group_info.group.description),h=v[0].content?v[0].content:"贴近一点 看身边"}catch(e){h=r.group.group.group_info.group.description}else h="贴近一点 看身边";p=Object(d["g"])(g.avatar)}}else location.href.indexOf("/draft")>-1?(b=r.content,console.log("征稿分享",b.summary),u=r.res.title,p=Object(d["g"])(r.res.cover)?Object(d["g"])(r.res.cover):"https://h5-qa.tiejin.cn/_nuxt/img/a6fa258.png",1==r.res.int_category?(h="贴近号： ".concat(r.res.communityName.substring(0,10)),r.res.collectionTotalCount>0&&(h+="\n ".concat(r.res.collectionTotalCount,"参与"))):2==r.res.int_category&&(h=b.summary?b.summary.substring(0,24):"分享文章"),(r.res.user.attributes.roster.name||r.res.user.fullname)&&(m="贴近 @".concat(r.res.user.attributes.roster.name||r.res.user.fullname.substring(0,6)," 出品"),h="".concat(h,"\n").concat(m))):(_=r.content,w=r.res.authors,console.log("content",r.content),0===r.res.int_type?(u=_.text?_.text:"分享图片",_.images&&_.images.length>0?(y=_.images.map(function(e){return e="[图片]",e}),h=y.join(" "),p=Object(d["g"])(_.images[0].link)):(h="[图片]",p="")):1===r.res.int_type?(u=_.text?_.text:"分享视频",_.videos&&_.videos.length>0?(x=_.videos.map(function(e){return e="[视频]</br>\n贴近 @".concat(w," 出品"),e}),h=x.join(" "),p=Object(d["g"])(_.videos[0].imageUrl)):(h="[视频]</br>\n贴近 @".concat(w," 出品"),p="")):(u=r.res.title?r.res.title:_.text?_.text:_.summary,h=_.summary?_.summary.substring(0,24):"分享文章",(r.res.user.attributes.roster.name||r.res.user.fullname)&&(m="贴近 @".concat(r.res.user.attributes.roster.name||r.res.user.fullname.substring(0,6)," 出品"),h="".concat(h,"\n").concat(m)),p=Object(d["g"])(r.res.bigcover)?Object(d["g"])(r.res.bigcover):Object(d["g"])(r.res.cover)));k={title:u,desc:h,imgUrl:p},Cookies.set("shareConfig",k),Object(d["l"])(c,k);case 19:e.next=22;break;case 21:return e.abrupt("return");case 22:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}})},ed08:function(e,t,n){"use strict";n.d(t,"e",function(){return s}),n.d(t,"h",function(){return u}),n.d(t,"g",function(){return l}),n.d(t,"f",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"k",function(){return h}),n.d(t,"i",function(){return f}),n.d(t,"d",function(){return v}),n.d(t,"a",function(){return _}),n.d(t,"l",function(){return w}),n.d(t,"c",function(){return y}),n.d(t,"j",function(){return x});n("96cf"),n("3b2b"),n("b54a"),n("f751");var r=n("3040"),o=(n("ac6a"),n("4917"),n("a481"),n("28a5"),n("f121")),a=n("c0d6"),i=n("76a0");function s(){location.href=o["a"].download}function c(e){e=e||window.location.href;var t=e.substring(e.lastIndexOf("?")+1),n={},r=/([^?&=]+)=([^?&=]*)/g;return t.replace(r,function(e,t,r){var o=decodeURIComponent(t),a=decodeURIComponent(r);return a=String(a),n[o]=a,e}),n}function u(e){var t=/<img.*?(?:>|\/>)/gi,n=e.match(t);if(n){var r=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,o=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,i=/height=[\'\"]?([^\'\"]*)[\'\"]?/i;n.forEach(function(t,n){var s,c,u,l=t.match(r),d=t.match(o),p=t.match(i);l?(d&&p?(d[1]<200?(s=d[1]+"px",u=p[1]+"px"):(s="100%",u=100*p[1]/d[1]+"%"),u,c=t.replace(/src=/g,'style="width: '.concat(s,"; height: ").concat(u,'; background: #e7e7e7; max-width: 100%;" data-feedlazy="feedlazy" data-type="preview" data-src='))):(s="100%",u="auto","28.27vw",c=t.replace(/src=/g,'style="width: '.concat(s,'; background: #e7e7e7; max-width: 100%;" data-feedlazy="feedlazy2" data-type="preview" data-src='))),console.log("srcArray[i]",l[n]),a["a"].state.CONTENT_IMGS.push(l[n]),a["a"].state.IMG_INDEX++):c="",e=e.replace(t,'<div class="img-box">'.concat(c,"</div>"))})}var s=/<video.*?(?:>|\/>|<\/video>)/gi,c=e.match(s);if(c){var u,l=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,d=/vid=[\'\"]?([^\'\"]*)[\'\"]?/i,p=/imageUrl=[\'\"]?([^\'\"]*)[\'\"]?/i,h=/poster=[\'\"]?([^\'\"]*)[\'\"]?/i,f=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,m=/height=[\'\"]?([^\'\"]*)[\'\"]?/i;c.forEach(function(t,n){var r,o,a,i,s=t.match(l),c=t.match(d),g=t.match(p),v=t.match(h),b=t.match(f),_=t.match(m),w="";r=c?c[1]:"",o=s?s[1]:"",i=parseInt(_[1])/parseInt(b[1]),a=g?g[1]:v?v[1]:"",i>1&&(w="video-box-vertical"),u=window.ENV.app?"<section \n          class='video-box video-box-native'\n          data-vid='".concat(r,"'\n          data-uid='").concat(o,"'\n          data-bg='").concat(a,"'>\n          <section \n            class='video-wrap'\n            data-vid='").concat(r,"'\n            data-uid='").concat(o,"'\n            >\n            <img data-src='").concat(a,"'\n              class='video-play-poster'/>\n            <span\n              class='video-play-icon' data-vid='").concat(r,"' data-uid='").concat(o,"'></span>\n          </section>\n        </section>"):"<section \n          class='video-box video-box-h5 ".concat(w,"'\n          data-vid='").concat(r,"'\n          data-uid='").concat(o,"'\n          >\n          <section \n            class='video-wrap'\n            data-vid='").concat(r,"'\n            data-uid='").concat(o,"'\n            >\n              <video src='").concat(s[1],"'\n              class='video-tag'\n              preload='none'\n              controls\n              controlsList='nodownload'\n              poster='").concat(a,"'\n              data-bg='").concat(a,'\'\n              playsinline="true"\n              webkit-playsinline="true"\n              x5-playsinline="true"\n              >\n              </video>\n          </section>\n        </section>'),e=e.replace(t,u)})}var g=/<iframe.*?(?:>|\/>|<\/iframe>)/gi,v=e.match(g);if(v){var b=/width=[\'\"]?([^\'\"]*)[\'\"]?/i,_=/height=[\'\"]?([^\'\"]*)[\'\"]?/i;v.forEach(function(t,n){var r=t.match(b),o=t.match(_),a=t.split(r[0]),i="".concat(a[0],'width="100%"').concat(a[1]),s=i.split(o[0]),c="".concat(s[0],' height="240" ').concat(s[1]),u='<section class="imgbox tiejin-iframe">\n                  '.concat(c,"</iframe>\n                </section>");e=e.replace(t,u)})}return e}function l(e,t,n){var r=o["a"].file;if(e){var a=n||500;return"src"===t?-1!==e.indexOf("://")?e+"?s="+a:r+e+"?s="+a:-1!==e.indexOf("://")?e:r+e}}function d(e,t){var n=new Date(e),r=new Date,o=n.getTime(n),a=r.getTime(r),i=a-o,s=i/1e3/60/60/24/30,c=Math.floor(s),u=i/1e3/60/60/24,l=Math.floor(u),d=i/1e3/60/60-24*l,p=Math.floor(d),h=i/1e3/60-1440*l-60*p,f=Math.floor(h),m=i/1e3-86400*l-3600*p-60*f,g=Math.floor(m);return c>1?c+"个月前":l>0?l+"天前":p>0?p+"小时前":f>10?f+"分钟前":g>0?"刚刚":void 0}function p(e,t){var n=t||null,r=e||null,o=!(!window.ENV.app||!window.ENV.ios);console.log("appPlayVideo",e,t),window.ENV.v120?o?window.WebViewJavascriptBridge&&setupWebViewJavascriptBridge(function(e){e.callHandler("playVideo",{url:r,vid:n})}):"undefined"!=typeof window.bridge&&window.bridge.playVideo(n,r):location.href="/?vid=".concat(n)}function h(e){var t=a["a"].state.CONTENT_IMGS,n=parseInt(e),r={imgs:t,index:n},o=!(!window.ENV.app||!window.ENV.ios);o?window.WebViewJavascriptBridge&&setupWebViewJavascriptBridge(function(e){e.callHandler("tapImage",r)}):"undefined"!=typeof window.bridge&&window.bridge.tapImage(JSON.stringify(r))}function f(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function m(e){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:location.href=t||o["a"].download;case 1:case"end":return e.stop()}},e,this)})),g.apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,s,c,u,l,d,p,h,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.store,r=t.route,o=t.str,a=t.defaultStr,i=t.redirectUrl,e.next=3,n.dispatch("down_adcookies");case 3:if(s=e.sent,!s){e.next=23;break}return l=r.params.id||r.params.messageid||r.params.sid,p=JSON.parse,r.path.indexOf("/community")>-1?(c="community",u="closer://community/".concat(l)):r.path.indexOf("/feed")>-1||r.path.indexOf("/article")>-1||r.path.indexOf("/comment")>-1||r.path.indexOf("/video")>-1||r.path.indexOf("/image")>-1?(c="article",u="closer://feed/".concat(l),c=1===n.state.res.int_type?"video":0===n.state.res.int_type?"images":"article"):r.path.indexOf("/group")>-1?(c="group",u="closer://group/".concat(l)):r.path.indexOf("/draft")>-1?(c="draft",u="closer://draft/".concat(l)):r.path.indexOf("/message")>-1?(c="message",u="closer://message/".concat(l)):(c="inviter",u="closer://jump/to/mine",l=p(Cookies.get("inviter")).id),d="string"===typeof o&&o?o:a,h={action:"click",objectType:c||"article",objectId:l||null,position:d,progress:1,recommendId:null},e.next=11,n.dispatch("down_statistics",{p1:h});case 11:if(f=e.sent,!f){e.next=23;break}if(!i){e.next=22;break}if("wx"!==i){e.next=18;break}return e.abrupt("return",!0);case 18:return m(i),e.abrupt("return");case 20:e.next=23;break;case 22:m(u);case 23:case"end":return e.stop()}},e,this)})),b.apply(this,arguments)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.split("?");var n=e[0],r=[];for(var o in e[1]&&(t=Object.assign(c(e[1]),t)),t)t.hasOwnProperty(o)&&r.push("".concat(o,"=").concat(t[o]));return n+"?"+r.join("&")}function w(e,t,n){console.info("wxshare content:",t),e.signature&&e.appId&&e.nonceStr&&e.timestamp&&(wx.config({debug:!1,signature:e.signature,appId:e.appId,nonceStr:e.nonceStr,timestamp:e.timestamp,jsApiList:n||["onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","onMenuShareTimeline"]}),wx.ready(function(){wx.onMenuShareAppMessage({title:t.title,desc:t.desc,imgUrl:t.imgUrl,link:t.link||location.href,type:"",dataUrl:"",success:function(){Object(i["Toast"])("分享成功~")}}),wx.onMenuShareTimeline({title:t.title,imgUrl:t.imgUrl,link:t.link||location.href,success:function(){Object(i["Toast"])("分享成功~")}})}),wx.error(function(e){console.error("wx.config.error",e)}))}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-dd",n=Date.now(),r=+new Date(e),o=n-r,a="";return a=o>=6048e5?new Date(e).Format(t):o>=864e5?parseInt(o/864e5)+"天前":o>=36e5?parseInt(o/36e5)+"小时前":o>=6e4?parseInt(o/6e4)+"分钟前":"刚刚",a}function x(e){e=parseInt(e);var t=parseInt(e/3600),n=e%3600,r=parseInt(n/60),o=n%60;return t=t>0&&t<10?"0".concat(t):t,r=0!=t&&r>=0&&r<10?"0".concat(r):r,o=o>=0&&o<10?"0".concat(o):o,0==t?"".concat(r,":").concat(o):"".concat(t,":").concat(r,":").concat(o)}Date.prototype.Format=function(e){if(e=e||"yyyy-MM-dd hh:mm:ss","Invalid Date"==this)return"";var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}},f121:function(e,t,n){"use strict";n("cadf"),n("551c"),n("097d");t["a"]={href:{build:"https://t1.tiejin.cn",dev:"https://t1-qa.tiejin.cn",sandbox:"https://t1-sandbox.tiejin.cn",local:"http://local.tiejin.cn:9999"},file:{build:"https://file.tiejin.cn",dev:"https://file-qa.tiejin.cn",sandbox:"https://file-sandbox.tiejin.cn",local:"https://file-sandbox.tiejin.cn"},server:{build:"https://api.tiejin.cn/command/",dev:"https://api-sandbox.tiejin.cn/command/",sandbox:"https://api-sandbox.tiejin.cn/command/",local:"https://api-sandbox.tiejin.cn/command/"},download:{build:"https://download.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588",dev:"https://download-qa.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588",sandbox:"https://download-sandbox.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588",local:"https://download-sandbox.tiejin.cn/?adid=closer-t1&fs=false&microlink=https%3a%2f%2fa.app.qq.com%2fo%2fsimple.jsp%3fpkgname%3dcom.ums.closer%26ckey%3dCK1409137336588"},wxAuthorization:{build:"https://h5.tiejin.cn/redirect?redirectUrl=",dev:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl=",sandbox:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl=",local:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl="}}},fa93:function(e,t,n){e.exports=n.p+"img/error.2ef59926.png"}});
//# sourceMappingURL=app.e90854e2.js.map